<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>16 Dates and times | Python for Data Science</title>
  <meta name="description" content="This book will teach you how to do data science with R Python: You’ll learn how to get your data into Python, get it into the most useful structure, transform it, visualise it and model it. In this book, you will find a practicum of skills for data science. Just as a chemist learns how to clean test tubes and stock a lab, you’ll learn how to clean data and draw plots—and many other things besides. These are the skills that allow data science to happen, and here you will find the best practices for doing each of these things with Python. You’ll learn how to use the grammar of graphics, literate programming, and reproducible research to save time. You’ll also learn how to manage cognitive resources to facilitate discoveries when wrangling, visualising, and exploring data." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="16 Dates and times | Python for Data Science" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://byuidatascience.github.io/python4ds/" />
  <meta property="og:image" content="https://byuidatascience.github.io/python4ds/cover.png" />
  <meta property="og:description" content="This book will teach you how to do data science with R Python: You’ll learn how to get your data into Python, get it into the most useful structure, transform it, visualise it and model it. In this book, you will find a practicum of skills for data science. Just as a chemist learns how to clean test tubes and stock a lab, you’ll learn how to clean data and draw plots—and many other things besides. These are the skills that allow data science to happen, and here you will find the best practices for doing each of these things with Python. You’ll learn how to use the grammar of graphics, literate programming, and reproducible research to save time. You’ll also learn how to manage cognitive resources to facilitate discoveries when wrangling, visualising, and exploring data." />
  <meta name="github-repo" content="byuidatascience/python4ds" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="16 Dates and times | Python for Data Science" />
  <meta name="twitter:site" content="@byuidss" />
  <meta name="twitter:description" content="This book will teach you how to do data science with R Python: You’ll learn how to get your data into Python, get it into the most useful structure, transform it, visualise it and model it. In this book, you will find a practicum of skills for data science. Just as a chemist learns how to clean test tubes and stock a lab, you’ll learn how to clean data and draw plots—and many other things besides. These are the skills that allow data science to happen, and here you will find the best practices for doing each of these things with Python. You’ll learn how to use the grammar of graphics, literate programming, and reproducible research to save time. You’ll also learn how to manage cognitive resources to facilitate discoveries when wrangling, visualising, and exploring data." />
  <meta name="twitter:image" content="https://byuidatascience.github.io/python4ds/cover.png" />

<meta name="author" content="J. Hathaway" />
<meta name="author" content="Katie Larson" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="factors.html"/>
<link rel="next" href="program-intro.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<script src="libs/vega-5.17.0/vega.min.js"></script>
<script src="libs/vega-lite-4.17.0/vega-lite.min.js"></script>
<link href="libs/vega-embed-6.12.2/vega-embed.css" rel="stylesheet" />
<script src="libs/vega-embed-6.12.2/vega-embed.js"></script>
<script src="libs/vegawidget-binding-0.3.2/vegawidget.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-132356198-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-132356198-3');
</script>



<link rel="apple-touch-icon-precomposed" sizes="57x57" href="icons/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="icons/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="icons/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="icons/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="icons/apple-touch-icon-60x60.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="icons/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="icons/apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="icons/apple-touch-icon-152x152.png" />
<link rel="icon" type="image/png" href="icons/favicon-196x196.png" sizes="196x196" />
<link rel="icon" type="image/png" href="icons/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/png" href="icons/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="icons/favicon-16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="icons/favicon-128.png" sizes="128x128" />
<meta name="application-name" content="&nbsp;"/>
<meta name="msapplication-TileColor" content="#FFFFFF" />
<meta name="msapplication-TileImage" content="icons/mstile-144x144.png" />
<meta name="msapplication-square70x70logo" content="icons/mstile-70x70.png" />
<meta name="msapplication-square150x150logo" content="icons/mstile-150x150.png" />
<meta name="msapplication-wide310x150logo" content="icons/mstile-310x150.png" />
<meta name="msapplication-square310x310logo" content="icons/mstile-310x310.png" />




<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="r4ds.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Python for Data Science</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-you-will-learn"><i class="fa fa-check"></i><b>1.1</b> What you will learn</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#how-this-book-is-organised"><i class="fa fa-check"></i><b>1.2</b> How this book is organised</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#what-you-wont-learn"><i class="fa fa-check"></i><b>1.3</b> What you won’t learn</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#big-data"><i class="fa fa-check"></i><b>1.3.1</b> Big data</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#r-julia-and-friends"><i class="fa fa-check"></i><b>1.3.2</b> R, Julia, and friends</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction.html"><a href="introduction.html#non-rectangular-data"><i class="fa fa-check"></i><b>1.3.3</b> Non-rectangular data</a></li>
<li class="chapter" data-level="1.3.4" data-path="introduction.html"><a href="introduction.html#hypothesis-confirmation"><i class="fa fa-check"></i><b>1.3.4</b> Hypothesis confirmation</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#prerequisites"><i class="fa fa-check"></i><b>1.4</b> Prerequisites</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="introduction.html"><a href="introduction.html#python"><i class="fa fa-check"></i><b>1.4.1</b> Python</a></li>
<li class="chapter" data-level="1.4.2" data-path="introduction.html"><a href="introduction.html#visual-studio-code-vs-code"><i class="fa fa-check"></i><b>1.4.2</b> Visual Studio Code (VS Code)</a></li>
<li class="chapter" data-level="1.4.3" data-path="introduction.html"><a href="introduction.html#package-management-pip"><i class="fa fa-check"></i><b>1.4.3</b> Package Management (pip)</a></li>
<li class="chapter" data-level="1.4.4" data-path="introduction.html"><a href="introduction.html#the-data-science-packages"><i class="fa fa-check"></i><b>1.4.4</b> The Data Science Packages</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#running-python-code"><i class="fa fa-check"></i><b>1.5</b> Running Python code</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#getting-help-and-learning-more"><i class="fa fa-check"></i><b>1.6</b> Getting help and learning more</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#datasets-access"><i class="fa fa-check"></i><b>1.7</b> Datasets access</a></li>
<li class="chapter" data-level="1.8" data-path="introduction.html"><a href="introduction.html#acknowledgements"><i class="fa fa-check"></i><b>1.8</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.9" data-path="introduction.html"><a href="introduction.html#colophon"><i class="fa fa-check"></i><b>1.9</b> Colophon</a></li>
</ul></li>
<li class="part"><span><b>I Explore</b></span></li>
<li class="chapter" data-level="2" data-path="explore-intro.html"><a href="explore-intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="data-visualisation.html"><a href="data-visualisation.html"><i class="fa fa-check"></i><b>3</b> Data visualisation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-visualisation.html"><a href="data-visualisation.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-visualisation.html"><a href="data-visualisation.html#prerequisites-1"><i class="fa fa-check"></i><b>3.1.1</b> Prerequisites</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-visualisation.html"><a href="data-visualisation.html#altair-data-management"><i class="fa fa-check"></i><b>3.1.2</b> Altair data management</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-visualisation.html"><a href="data-visualisation.html#first-steps"><i class="fa fa-check"></i><b>3.2</b> First steps</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-visualisation.html"><a href="data-visualisation.html#the-mpg-data-frame"><i class="fa fa-check"></i><b>3.2.1</b> The <code>mpg</code> data frame</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-visualisation.html"><a href="data-visualisation.html#creating-an-altair-plot"><i class="fa fa-check"></i><b>3.2.2</b> Creating an Altair plot</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-visualisation.html"><a href="data-visualisation.html#a-graphing-template"><i class="fa fa-check"></i><b>3.2.3</b> A graphing template</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-visualisation.html"><a href="data-visualisation.html#exercises"><i class="fa fa-check"></i><b>3.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-visualisation.html"><a href="data-visualisation.html#aesthetic-mappings"><i class="fa fa-check"></i><b>3.3</b> Aesthetic mappings</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-visualisation.html"><a href="data-visualisation.html#exercises-1"><i class="fa fa-check"></i><b>3.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-visualisation.html"><a href="data-visualisation.html#common-problems"><i class="fa fa-check"></i><b>3.4</b> Common problems</a></li>
<li class="chapter" data-level="3.5" data-path="data-visualisation.html"><a href="data-visualisation.html#facets"><i class="fa fa-check"></i><b>3.5</b> Facets</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="data-visualisation.html"><a href="data-visualisation.html#exercises-2"><i class="fa fa-check"></i><b>3.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="data-visualisation.html"><a href="data-visualisation.html#geometric-objects"><i class="fa fa-check"></i><b>3.6</b> Geometric objects</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="data-visualisation.html"><a href="data-visualisation.html#exercises-3"><i class="fa fa-check"></i><b>3.6.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="data-visualisation.html"><a href="data-visualisation.html#statistical-transformations"><i class="fa fa-check"></i><b>3.7</b> Statistical transformations</a></li>
<li class="chapter" data-level="3.8" data-path="data-visualisation.html"><a href="data-visualisation.html#position-adjustments"><i class="fa fa-check"></i><b>3.8</b> Position adjustments</a></li>
<li class="chapter" data-level="3.9" data-path="data-visualisation.html"><a href="data-visualisation.html#coordinate-systems-maps"><i class="fa fa-check"></i><b>3.9</b> Coordinate systems (maps)</a></li>
<li class="chapter" data-level="3.10" data-path="data-visualisation.html"><a href="data-visualisation.html#the-layered-grammar-of-graphics"><i class="fa fa-check"></i><b>3.10</b> The layered grammar of graphics</a></li>
<li class="chapter" data-level="3.11" data-path="data-visualisation.html"><a href="data-visualisation.html#altairs-grammar-of-graphics"><i class="fa fa-check"></i><b>3.11</b> Altair’s grammar of graphics</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="workflow-basics.html"><a href="workflow-basics.html"><i class="fa fa-check"></i><b>4</b> Workflow: basics</a>
<ul>
<li class="chapter" data-level="4.1" data-path="workflow-basics.html"><a href="workflow-basics.html#coding-basics"><i class="fa fa-check"></i><b>4.1</b> Coding basics</a></li>
<li class="chapter" data-level="4.2" data-path="workflow-basics.html"><a href="workflow-basics.html#whats-in-a-name"><i class="fa fa-check"></i><b>4.2</b> What’s in a name?</a></li>
<li class="chapter" data-level="4.3" data-path="workflow-basics.html"><a href="workflow-basics.html#calling-functions"><i class="fa fa-check"></i><b>4.3</b> Calling functions</a></li>
<li class="chapter" data-level="4.4" data-path="workflow-basics.html"><a href="workflow-basics.html#exercises-4"><i class="fa fa-check"></i><b>4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>5</b> Data transformation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="transform.html"><a href="transform.html#introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="transform.html"><a href="transform.html#prerequisites-2"><i class="fa fa-check"></i><b>5.1.1</b> Prerequisites</a></li>
<li class="chapter" data-level="5.1.2" data-path="transform.html"><a href="transform.html#nycflights13"><i class="fa fa-check"></i><b>5.1.2</b> nycflights13</a></li>
<li class="chapter" data-level="5.1.3" data-path="transform.html"><a href="transform.html#pandas-data-manipulation-basics"><i class="fa fa-check"></i><b>5.1.3</b> pandas data manipulation basics</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="transform.html"><a href="transform.html#filter-rows-with-.query"><i class="fa fa-check"></i><b>5.2</b> Filter rows with <code>.query()</code></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="transform.html"><a href="transform.html#comparisons"><i class="fa fa-check"></i><b>5.2.1</b> Comparisons</a></li>
<li class="chapter" data-level="5.2.2" data-path="transform.html"><a href="transform.html#logical-operators"><i class="fa fa-check"></i><b>5.2.2</b> Logical operators</a></li>
<li class="chapter" data-level="5.2.3" data-path="transform.html"><a href="transform.html#missing-values"><i class="fa fa-check"></i><b>5.2.3</b> Missing values</a></li>
<li class="chapter" data-level="5.2.4" data-path="transform.html"><a href="transform.html#exercises-5"><i class="fa fa-check"></i><b>5.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="transform.html"><a href="transform.html#arrange-or-sort-rows-with-.sort_values"><i class="fa fa-check"></i><b>5.3</b> Arrange or sort rows with <code>.sort_values()</code></a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="transform.html"><a href="transform.html#exercises-6"><i class="fa fa-check"></i><b>5.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="transform.html"><a href="transform.html#select"><i class="fa fa-check"></i><b>5.4</b> Select columns with <code>filter()</code> or <code>loc[]</code></a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="transform.html"><a href="transform.html#exercises-7"><i class="fa fa-check"></i><b>5.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="transform.html"><a href="transform.html#add-new-variables-with-.assign"><i class="fa fa-check"></i><b>5.5</b> Add new variables with <code>.assign()</code></a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="transform.html"><a href="transform.html#mutate-funs"><i class="fa fa-check"></i><b>5.5.1</b> Useful creation functions</a></li>
<li class="chapter" data-level="5.5.2" data-path="transform.html"><a href="transform.html#exercises-8"><i class="fa fa-check"></i><b>5.5.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="transform.html"><a href="transform.html#grouped-summaries-or-aggregations-with-.agg"><i class="fa fa-check"></i><b>5.6</b> Grouped summaries or aggregations with <code>.agg()</code></a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="transform.html"><a href="transform.html#combining-multiple-operations"><i class="fa fa-check"></i><b>5.6.1</b> Combining multiple operations</a></li>
<li class="chapter" data-level="5.6.2" data-path="transform.html"><a href="transform.html#missing-values-1"><i class="fa fa-check"></i><b>5.6.2</b> Missing values</a></li>
<li class="chapter" data-level="5.6.3" data-path="transform.html"><a href="transform.html#counts"><i class="fa fa-check"></i><b>5.6.3</b> Counts</a></li>
<li class="chapter" data-level="5.6.4" data-path="transform.html"><a href="transform.html#summarise-funs"><i class="fa fa-check"></i><b>5.6.4</b> Useful summary functions</a></li>
<li class="chapter" data-level="5.6.5" data-path="transform.html"><a href="transform.html#grouping-by-multiple-variables"><i class="fa fa-check"></i><b>5.6.5</b> Grouping by multiple variables</a></li>
<li class="chapter" data-level="5.6.6" data-path="transform.html"><a href="transform.html#ungrouping-reseting-the-index"><i class="fa fa-check"></i><b>5.6.6</b> Ungrouping (reseting the index)</a></li>
<li class="chapter" data-level="5.6.7" data-path="transform.html"><a href="transform.html#exercises-9"><i class="fa fa-check"></i><b>5.6.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="transform.html"><a href="transform.html#grouped-transforms-and-filters"><i class="fa fa-check"></i><b>5.7</b> Grouped transforms (and filters)</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="transform.html"><a href="transform.html#exercises-10"><i class="fa fa-check"></i><b>5.7.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="workflow-scripts.html"><a href="workflow-scripts.html"><i class="fa fa-check"></i><b>6</b> Workflow: scripts</a>
<ul>
<li class="chapter" data-level="6.1" data-path="workflow-scripts.html"><a href="workflow-scripts.html#running-code"><i class="fa fa-check"></i><b>6.1</b> Running code</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>7</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="7.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#introduction-3"><i class="fa fa-check"></i><b>7.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#prerequisites-3"><i class="fa fa-check"></i><b>7.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#questions"><i class="fa fa-check"></i><b>7.2</b> Questions</a></li>
<li class="chapter" data-level="7.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#variation"><i class="fa fa-check"></i><b>7.3</b> Variation</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#visualising-distributions"><i class="fa fa-check"></i><b>7.3.1</b> Visualising distributions</a></li>
<li class="chapter" data-level="7.3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#typical-values"><i class="fa fa-check"></i><b>7.3.2</b> Typical values</a></li>
<li class="chapter" data-level="7.3.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#unusual-values"><i class="fa fa-check"></i><b>7.3.3</b> Unusual values</a></li>
<li class="chapter" data-level="7.3.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercises-11"><i class="fa fa-check"></i><b>7.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#missing-values-2"><i class="fa fa-check"></i><b>7.4</b> Missing values</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercises-12"><i class="fa fa-check"></i><b>7.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#covariation"><i class="fa fa-check"></i><b>7.5</b> Covariation</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#cat-cont"><i class="fa fa-check"></i><b>7.5.1</b> A categorical and continuous variable</a></li>
<li class="chapter" data-level="7.5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#two-categorical-variables"><i class="fa fa-check"></i><b>7.5.2</b> Two categorical variables</a></li>
<li class="chapter" data-level="7.5.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#two-continuous-variables"><i class="fa fa-check"></i><b>7.5.3</b> Two continuous variables</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#patterns-and-models"><i class="fa fa-check"></i><b>7.6</b> Patterns and models</a></li>
<li class="chapter" data-level="7.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#altair-calls"><i class="fa fa-check"></i><b>7.7</b> Altair calls</a></li>
<li class="chapter" data-level="7.8" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#learning-more"><i class="fa fa-check"></i><b>7.8</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="workflow-projects.html"><a href="workflow-projects.html"><i class="fa fa-check"></i><b>8</b> Workflow: projects</a>
<ul>
<li class="chapter" data-level="8.1" data-path="workflow-projects.html"><a href="workflow-projects.html#what-is-real"><i class="fa fa-check"></i><b>8.1</b> What is real?</a></li>
<li class="chapter" data-level="8.2" data-path="workflow-projects.html"><a href="workflow-projects.html#where-does-your-analysis-live"><i class="fa fa-check"></i><b>8.2</b> Where does your analysis live?</a></li>
<li class="chapter" data-level="8.3" data-path="workflow-projects.html"><a href="workflow-projects.html#paths-and-directories"><i class="fa fa-check"></i><b>8.3</b> Paths and directories</a></li>
<li class="chapter" data-level="8.4" data-path="workflow-projects.html"><a href="workflow-projects.html#vs-code-workspaces"><i class="fa fa-check"></i><b>8.4</b> VS Code workspaces</a></li>
<li class="chapter" data-level="8.5" data-path="workflow-projects.html"><a href="workflow-projects.html#summary"><i class="fa fa-check"></i><b>8.5</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>II Wrangle</b></span></li>
<li class="chapter" data-level="9" data-path="wrangle-intro.html"><a href="wrangle-intro.html"><i class="fa fa-check"></i><b>9</b> Introduction</a></li>
<li class="chapter" data-level="10" data-path="dataframe.html"><a href="dataframe.html"><i class="fa fa-check"></i><b>10</b> DataFrame</a>
<ul>
<li class="chapter" data-level="10.1" data-path="dataframe.html"><a href="dataframe.html#introduction-4"><i class="fa fa-check"></i><b>10.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="dataframe.html"><a href="dataframe.html#prerequisites-4"><i class="fa fa-check"></i><b>10.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="dataframe.html"><a href="dataframe.html#creating-tibbles"><i class="fa fa-check"></i><b>10.2</b> Creating tibbles</a></li>
<li class="chapter" data-level="10.3" data-path="dataframe.html"><a href="dataframe.html#printing"><i class="fa fa-check"></i><b>10.3</b> Printing</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="dataframe.html"><a href="dataframe.html#subsetting"><i class="fa fa-check"></i><b>10.3.1</b> Subsetting</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="dataframe.html"><a href="dataframe.html#exercises-16"><i class="fa fa-check"></i><b>10.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="data-import.html"><a href="data-import.html"><i class="fa fa-check"></i><b>11</b> Data import</a>
<ul>
<li class="chapter" data-level="11.1" data-path="data-import.html"><a href="data-import.html#introduction-5"><i class="fa fa-check"></i><b>11.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="data-import.html"><a href="data-import.html#prerequisites-5"><i class="fa fa-check"></i><b>11.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="data-import.html"><a href="data-import.html#getting-started"><i class="fa fa-check"></i><b>11.2</b> Getting started</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="data-import.html"><a href="data-import.html#exercises-17"><i class="fa fa-check"></i><b>11.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="data-import.html"><a href="data-import.html#parsing-a-vector"><i class="fa fa-check"></i><b>11.3</b> Parsing a vector</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="data-import.html"><a href="data-import.html#numbers"><i class="fa fa-check"></i><b>11.3.1</b> Numbers</a></li>
<li class="chapter" data-level="11.3.2" data-path="data-import.html"><a href="data-import.html#readr-strings"><i class="fa fa-check"></i><b>11.3.2</b> Strings</a></li>
<li class="chapter" data-level="11.3.3" data-path="data-import.html"><a href="data-import.html#readr-factors"><i class="fa fa-check"></i><b>11.3.3</b> Category (Factors)</a></li>
<li class="chapter" data-level="11.3.4" data-path="data-import.html"><a href="data-import.html#readr-datetimes"><i class="fa fa-check"></i><b>11.3.4</b> Dates and times</a></li>
<li class="chapter" data-level="11.3.5" data-path="data-import.html"><a href="data-import.html#exercises-18"><i class="fa fa-check"></i><b>11.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="data-import.html"><a href="data-import.html#parsing-a-file"><i class="fa fa-check"></i><b>11.4</b> Parsing a file</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="data-import.html"><a href="data-import.html#strategy"><i class="fa fa-check"></i><b>11.4.1</b> Strategy</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="data-import.html"><a href="data-import.html#writing-to-a-file"><i class="fa fa-check"></i><b>11.5</b> Writing to a file</a></li>
<li class="chapter" data-level="11.6" data-path="data-import.html"><a href="data-import.html#other-types-of-data"><i class="fa fa-check"></i><b>11.6</b> Other types of data</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>12</b> Tidy data</a>
<ul>
<li class="chapter" data-level="12.1" data-path="tidy-data.html"><a href="tidy-data.html#introduction-6"><i class="fa fa-check"></i><b>12.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="tidy-data.html"><a href="tidy-data.html#prerequisites-6"><i class="fa fa-check"></i><b>12.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="tidy-data.html"><a href="tidy-data.html#tidy-data-1"><i class="fa fa-check"></i><b>12.2</b> Tidy data</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="tidy-data.html"><a href="tidy-data.html#exercises-19"><i class="fa fa-check"></i><b>12.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="tidy-data.html"><a href="tidy-data.html#pivoting"><i class="fa fa-check"></i><b>12.3</b> Pivoting</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="tidy-data.html"><a href="tidy-data.html#longer-melt"><i class="fa fa-check"></i><b>12.3.1</b> Longer (<code>melt()</code>)</a></li>
<li class="chapter" data-level="12.3.2" data-path="tidy-data.html"><a href="tidy-data.html#wider-pivot"><i class="fa fa-check"></i><b>12.3.2</b> Wider (<code>pivot()</code>)</a></li>
<li class="chapter" data-level="12.3.3" data-path="tidy-data.html"><a href="tidy-data.html#exercises-20"><i class="fa fa-check"></i><b>12.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="tidy-data.html"><a href="tidy-data.html#separating-and-uniting"><i class="fa fa-check"></i><b>12.4</b> Separating and uniting</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="tidy-data.html"><a href="tidy-data.html#split-separate"><i class="fa fa-check"></i><b>12.4.1</b> Split (Separate)</a></li>
<li class="chapter" data-level="12.4.2" data-path="tidy-data.html"><a href="tidy-data.html#unite"><i class="fa fa-check"></i><b>12.4.2</b> Unite</a></li>
<li class="chapter" data-level="12.4.3" data-path="tidy-data.html"><a href="tidy-data.html#exercises-21"><i class="fa fa-check"></i><b>12.4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="tidy-data.html"><a href="tidy-data.html#missing-values-3"><i class="fa fa-check"></i><b>12.5</b> Missing values</a></li>
<li class="chapter" data-level="12.6" data-path="tidy-data.html"><a href="tidy-data.html#case-study"><i class="fa fa-check"></i><b>12.6</b> Case Study</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="tidy-data.html"><a href="tidy-data.html#exercises-22"><i class="fa fa-check"></i><b>12.6.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="tidy-data.html"><a href="tidy-data.html#non-tidy-data"><i class="fa fa-check"></i><b>12.7</b> Non-tidy data</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>13</b> Relational data</a>
<ul>
<li class="chapter" data-level="13.1" data-path="relational-data.html"><a href="relational-data.html#introduction-7"><i class="fa fa-check"></i><b>13.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="relational-data.html"><a href="relational-data.html#prerequisites-7"><i class="fa fa-check"></i><b>13.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="relational-data.html"><a href="relational-data.html#nycflights13-relational"><i class="fa fa-check"></i><b>13.2</b> nycflights13</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="relational-data.html"><a href="relational-data.html#exercises-23"><i class="fa fa-check"></i><b>13.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="relational-data.html"><a href="relational-data.html#keys"><i class="fa fa-check"></i><b>13.3</b> Keys</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="relational-data.html"><a href="relational-data.html#exercises-24"><i class="fa fa-check"></i><b>13.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="relational-data.html"><a href="relational-data.html#mutating-joins"><i class="fa fa-check"></i><b>13.4</b> Mutating joins</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="relational-data.html"><a href="relational-data.html#understanding-joins"><i class="fa fa-check"></i><b>13.4.1</b> Understanding joins</a></li>
<li class="chapter" data-level="13.4.2" data-path="relational-data.html"><a href="relational-data.html#inner-join"><i class="fa fa-check"></i><b>13.4.2</b> Inner join</a></li>
<li class="chapter" data-level="13.4.3" data-path="relational-data.html"><a href="relational-data.html#outer-join"><i class="fa fa-check"></i><b>13.4.3</b> Outer joins</a></li>
<li class="chapter" data-level="13.4.4" data-path="relational-data.html"><a href="relational-data.html#join-matches"><i class="fa fa-check"></i><b>13.4.4</b> Duplicate keys</a></li>
<li class="chapter" data-level="13.4.5" data-path="relational-data.html"><a href="relational-data.html#join-by"><i class="fa fa-check"></i><b>13.4.5</b> Defining the key columns</a></li>
<li class="chapter" data-level="13.4.6" data-path="relational-data.html"><a href="relational-data.html#exercises-25"><i class="fa fa-check"></i><b>13.4.6</b> Exercises</a></li>
<li class="chapter" data-level="13.4.7" data-path="relational-data.html"><a href="relational-data.html#other-implementations"><i class="fa fa-check"></i><b>13.4.7</b> Other implementations</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="relational-data.html"><a href="relational-data.html#filtering-joins"><i class="fa fa-check"></i><b>13.5</b> Filtering joins</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="relational-data.html"><a href="relational-data.html#exercises-26"><i class="fa fa-check"></i><b>13.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="relational-data.html"><a href="relational-data.html#join-problems"><i class="fa fa-check"></i><b>13.6</b> Join problems</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>14</b> Strings</a>
<ul>
<li class="chapter" data-level="14.1" data-path="strings.html"><a href="strings.html#introduction-8"><i class="fa fa-check"></i><b>14.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="strings.html"><a href="strings.html#prerequisites-8"><i class="fa fa-check"></i><b>14.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="strings.html"><a href="strings.html#string-basics"><i class="fa fa-check"></i><b>14.2</b> String basics</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="strings.html"><a href="strings.html#string-length"><i class="fa fa-check"></i><b>14.2.1</b> String length</a></li>
<li class="chapter" data-level="14.2.2" data-path="strings.html"><a href="strings.html#combining-strings"><i class="fa fa-check"></i><b>14.2.2</b> Combining strings</a></li>
<li class="chapter" data-level="14.2.3" data-path="strings.html"><a href="strings.html#subsetting-strings"><i class="fa fa-check"></i><b>14.2.3</b> Subsetting strings</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="strings.html"><a href="strings.html#matching-patterns-with-regular-expressions"><i class="fa fa-check"></i><b>14.3</b> Matching patterns with regular expressions</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="strings.html"><a href="strings.html#basic-matches"><i class="fa fa-check"></i><b>14.3.1</b> Basic matches</a></li>
<li class="chapter" data-level="14.3.2" data-path="strings.html"><a href="strings.html#anchors"><i class="fa fa-check"></i><b>14.3.2</b> Anchors</a></li>
<li class="chapter" data-level="14.3.3" data-path="strings.html"><a href="strings.html#character-classes-and-alternatives"><i class="fa fa-check"></i><b>14.3.3</b> Character classes and alternatives</a></li>
<li class="chapter" data-level="14.3.4" data-path="strings.html"><a href="strings.html#repetition"><i class="fa fa-check"></i><b>14.3.4</b> Repetition</a></li>
<li class="chapter" data-level="14.3.5" data-path="strings.html"><a href="strings.html#grouping-and-backreferences"><i class="fa fa-check"></i><b>14.3.5</b> Grouping and backreferences</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="strings.html"><a href="strings.html#tools"><i class="fa fa-check"></i><b>14.4</b> Tools</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="strings.html"><a href="strings.html#detect-matches"><i class="fa fa-check"></i><b>14.4.1</b> Detect matches</a></li>
<li class="chapter" data-level="14.4.2" data-path="strings.html"><a href="strings.html#extract-matches"><i class="fa fa-check"></i><b>14.4.2</b> Extract matches</a></li>
<li class="chapter" data-level="14.4.3" data-path="strings.html"><a href="strings.html#grouped-matches"><i class="fa fa-check"></i><b>14.4.3</b> Grouped matches</a></li>
<li class="chapter" data-level="14.4.4" data-path="strings.html"><a href="strings.html#replacing-matches"><i class="fa fa-check"></i><b>14.4.4</b> Replacing matches</a></li>
<li class="chapter" data-level="14.4.5" data-path="strings.html"><a href="strings.html#splitting"><i class="fa fa-check"></i><b>14.4.5</b> Splitting</a></li>
<li class="chapter" data-level="14.4.6" data-path="strings.html"><a href="strings.html#find-matches"><i class="fa fa-check"></i><b>14.4.6</b> Find matches</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="strings.html"><a href="strings.html#other-types-of-pattern"><i class="fa fa-check"></i><b>14.5</b> Other types of pattern</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="strings.html"><a href="strings.html#exercises-37"><i class="fa fa-check"></i><b>14.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="strings.html"><a href="strings.html#strings-in-python"><i class="fa fa-check"></i><b>14.6</b> strings in Python</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="factors.html"><a href="factors.html"><i class="fa fa-check"></i><b>15</b> Factors</a>
<ul>
<li class="chapter" data-level="15.1" data-path="factors.html"><a href="factors.html#introduction-9"><i class="fa fa-check"></i><b>15.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="factors.html"><a href="factors.html#prerequisites-9"><i class="fa fa-check"></i><b>15.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="factors.html"><a href="factors.html#creating-categories"><i class="fa fa-check"></i><b>15.2</b> Creating categories</a></li>
<li class="chapter" data-level="15.3" data-path="factors.html"><a href="factors.html#general-social-survey"><i class="fa fa-check"></i><b>15.3</b> General Social Survey</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="factors.html"><a href="factors.html#exercise"><i class="fa fa-check"></i><b>15.3.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="factors.html"><a href="factors.html#modifying-factor-order"><i class="fa fa-check"></i><b>15.4</b> Modifying factor order</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="factors.html"><a href="factors.html#exercises-38"><i class="fa fa-check"></i><b>15.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="factors.html"><a href="factors.html#modifying-factor-levels"><i class="fa fa-check"></i><b>15.5</b> Modifying factor levels</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="factors.html"><a href="factors.html#exercises-39"><i class="fa fa-check"></i><b>15.5.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="dates-and-times.html"><a href="dates-and-times.html"><i class="fa fa-check"></i><b>16</b> Dates and times</a>
<ul>
<li class="chapter" data-level="16.1" data-path="dates-and-times.html"><a href="dates-and-times.html#introduction-10"><i class="fa fa-check"></i><b>16.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="dates-and-times.html"><a href="dates-and-times.html#prerequisites-10"><i class="fa fa-check"></i><b>16.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="dates-and-times.html"><a href="dates-and-times.html#creating-datetimes"><i class="fa fa-check"></i><b>16.2</b> Creating date/times</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="dates-and-times.html"><a href="dates-and-times.html#from-strings"><i class="fa fa-check"></i><b>16.2.1</b> From strings</a></li>
<li class="chapter" data-level="16.2.2" data-path="dates-and-times.html"><a href="dates-and-times.html#from-individual-components"><i class="fa fa-check"></i><b>16.2.2</b> From individual components</a></li>
<li class="chapter" data-level="16.2.3" data-path="dates-and-times.html"><a href="dates-and-times.html#from-other-types"><i class="fa fa-check"></i><b>16.2.3</b> From other types</a></li>
<li class="chapter" data-level="16.2.4" data-path="dates-and-times.html"><a href="dates-and-times.html#exercises-40"><i class="fa fa-check"></i><b>16.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="dates-and-times.html"><a href="dates-and-times.html#date-time-components"><i class="fa fa-check"></i><b>16.3</b> Date-time components</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="dates-and-times.html"><a href="dates-and-times.html#getting-components"><i class="fa fa-check"></i><b>16.3.1</b> Getting components</a></li>
<li class="chapter" data-level="16.3.2" data-path="dates-and-times.html"><a href="dates-and-times.html#rounding"><i class="fa fa-check"></i><b>16.3.2</b> Rounding</a></li>
<li class="chapter" data-level="16.3.3" data-path="dates-and-times.html"><a href="dates-and-times.html#setting-components"><i class="fa fa-check"></i><b>16.3.3</b> Setting components</a></li>
<li class="chapter" data-level="16.3.4" data-path="dates-and-times.html"><a href="dates-and-times.html#exercises-41"><i class="fa fa-check"></i><b>16.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="dates-and-times.html"><a href="dates-and-times.html#time-spans-deltas"><i class="fa fa-check"></i><b>16.4</b> Time spans (Deltas)</a></li>
<li class="chapter" data-level="16.5" data-path="dates-and-times.html"><a href="dates-and-times.html#time-zones"><i class="fa fa-check"></i><b>16.5</b> Time zones</a></li>
</ul></li>
<li class="part"><span><b>III Program</b></span></li>
<li class="chapter" data-level="17" data-path="program-intro.html"><a href="program-intro.html"><i class="fa fa-check"></i><b>17</b> Introduction</a>
<ul>
<li class="chapter" data-level="17.1" data-path="program-intro.html"><a href="program-intro.html#learning-more-1"><i class="fa fa-check"></i><b>17.1</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="pipes-not-included.html"><a href="pipes-not-included.html"><i class="fa fa-check"></i><b>18</b> Pipes (Not included)</a>
<ul>
<li class="chapter" data-level="18.1" data-path="pipes-not-included.html"><a href="pipes-not-included.html#introduction-11"><i class="fa fa-check"></i><b>18.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="functions-tbd.html"><a href="functions-tbd.html"><i class="fa fa-check"></i><b>19</b> Functions (TBD)</a>
<ul>
<li class="chapter" data-level="19.1" data-path="functions-tbd.html"><a href="functions-tbd.html#introduction-12"><i class="fa fa-check"></i><b>19.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="vectors-tbd.html"><a href="vectors-tbd.html"><i class="fa fa-check"></i><b>20</b> Vectors (TBD)</a>
<ul>
<li class="chapter" data-level="20.1" data-path="vectors-tbd.html"><a href="vectors-tbd.html#introduction-13"><i class="fa fa-check"></i><b>20.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="iteration-tbd.html"><a href="iteration-tbd.html"><i class="fa fa-check"></i><b>21</b> Iteration (TBD)</a>
<ul>
<li class="chapter" data-level="21.1" data-path="iteration-tbd.html"><a href="iteration-tbd.html#introduction-14"><i class="fa fa-check"></i><b>21.1</b> Introduction</a></li>
</ul></li>
<li class="part"><span><b>IV Model</b></span></li>
<li class="chapter" data-level="22" data-path="model-intro.html"><a href="model-intro.html"><i class="fa fa-check"></i><b>22</b> Introduction</a>
<ul>
<li class="chapter" data-level="22.1" data-path="model-intro.html"><a href="model-intro.html#hypothesis-generation-vs.-hypothesis-confirmation"><i class="fa fa-check"></i><b>22.1</b> Hypothesis generation vs. hypothesis confirmation</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="model-basics-tbd.html"><a href="model-basics-tbd.html"><i class="fa fa-check"></i><b>23</b> Model basics (TBD)</a>
<ul>
<li class="chapter" data-level="23.1" data-path="model-basics-tbd.html"><a href="model-basics-tbd.html#introduction-15"><i class="fa fa-check"></i><b>23.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="model-building-tbd.html"><a href="model-building-tbd.html"><i class="fa fa-check"></i><b>24</b> Model building (TBD)</a>
<ul>
<li class="chapter" data-level="24.1" data-path="model-building-tbd.html"><a href="model-building-tbd.html#introduction-16"><i class="fa fa-check"></i><b>24.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="many-models-tbd.html"><a href="many-models-tbd.html"><i class="fa fa-check"></i><b>25</b> Many models (TBD)</a>
<ul>
<li class="chapter" data-level="25.1" data-path="many-models-tbd.html"><a href="many-models-tbd.html#introduction-17"><i class="fa fa-check"></i><b>25.1</b> Introduction</a></li>
</ul></li>
<li class="part"><span><b>V Communicate</b></span></li>
<li class="chapter" data-level="26" data-path="communicate-intro.html"><a href="communicate-intro.html"><i class="fa fa-check"></i><b>26</b> Introduction</a></li>
<li class="chapter" data-level="27" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>27</b> Markdown</a>
<ul>
<li class="chapter" data-level="27.1" data-path="markdown.html"><a href="markdown.html#introduction-18"><i class="fa fa-check"></i><b>27.1</b> Introduction</a></li>
<li class="chapter" data-level="27.2" data-path="markdown.html"><a href="markdown.html#markdown-basics"><i class="fa fa-check"></i><b>27.2</b> Markdown basics</a></li>
<li class="chapter" data-level="27.3" data-path="markdown.html"><a href="markdown.html#text-formatting-with-markdown"><i class="fa fa-check"></i><b>27.3</b> Text formatting with Markdown</a>
<ul>
<li class="chapter" data-level="27.3.1" data-path="markdown.html"><a href="markdown.html#exercises-42"><i class="fa fa-check"></i><b>27.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="27.4" data-path="markdown.html"><a href="markdown.html#code-chunks"><i class="fa fa-check"></i><b>27.4</b> Code chunks</a>
<ul>
<li class="chapter" data-level="27.4.1" data-path="markdown.html"><a href="markdown.html#tables"><i class="fa fa-check"></i><b>27.4.1</b> Tables</a></li>
</ul></li>
<li class="chapter" data-level="27.5" data-path="markdown.html"><a href="markdown.html#learning-more-2"><i class="fa fa-check"></i><b>27.5</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html"><i class="fa fa-check"></i><b>28</b> Graphics for communication</a>
<ul>
<li class="chapter" data-level="28.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#introduction-19"><i class="fa fa-check"></i><b>28.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="28.1.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#prerequisites-11"><i class="fa fa-check"></i><b>28.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="28.2" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#label"><i class="fa fa-check"></i><b>28.2</b> Label</a>
<ul>
<li class="chapter" data-level="28.2.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-43"><i class="fa fa-check"></i><b>28.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="28.3" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#annotations"><i class="fa fa-check"></i><b>28.3</b> Annotations</a>
<ul>
<li class="chapter" data-level="28.3.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-44"><i class="fa fa-check"></i><b>28.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="28.4" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#scales"><i class="fa fa-check"></i><b>28.4</b> Scales</a>
<ul>
<li class="chapter" data-level="28.4.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#axis-ticks-and-legend-keys"><i class="fa fa-check"></i><b>28.4.1</b> Axis ticks and legend keys</a></li>
<li class="chapter" data-level="28.4.2" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#legend-layout"><i class="fa fa-check"></i><b>28.4.2</b> Legend layout</a></li>
<li class="chapter" data-level="28.4.3" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#replacing-a-scale"><i class="fa fa-check"></i><b>28.4.3</b> Replacing a scale</a></li>
<li class="chapter" data-level="28.4.4" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-45"><i class="fa fa-check"></i><b>28.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="28.5" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#zooming"><i class="fa fa-check"></i><b>28.5</b> Zooming</a></li>
<li class="chapter" data-level="28.6" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#themes"><i class="fa fa-check"></i><b>28.6</b> Themes</a></li>
<li class="chapter" data-level="28.7" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#saving-your-plots"><i class="fa fa-check"></i><b>28.7</b> Saving your plots</a></li>
<li class="chapter" data-level="28.8" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#learning-more-3"><i class="fa fa-check"></i><b>28.8</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html"><i class="fa fa-check"></i><b>29</b> R Markdown formats</a>
<ul>
<li class="chapter" data-level="29.1" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html#introduction-20"><i class="fa fa-check"></i><b>29.1</b> Introduction</a></li>
<li class="chapter" data-level="29.2" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html#output-options"><i class="fa fa-check"></i><b>29.2</b> Output options</a></li>
<li class="chapter" data-level="29.3" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html#documents"><i class="fa fa-check"></i><b>29.3</b> Documents</a></li>
<li class="chapter" data-level="29.4" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html#notebooks"><i class="fa fa-check"></i><b>29.4</b> Notebooks</a></li>
<li class="chapter" data-level="29.5" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html#presentations"><i class="fa fa-check"></i><b>29.5</b> Presentations</a></li>
<li class="chapter" data-level="29.6" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html#dashboards"><i class="fa fa-check"></i><b>29.6</b> Dashboards</a></li>
<li class="chapter" data-level="29.7" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html#interactivity"><i class="fa fa-check"></i><b>29.7</b> Interactivity</a>
<ul>
<li class="chapter" data-level="29.7.1" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html#htmlwidgets"><i class="fa fa-check"></i><b>29.7.1</b> htmlwidgets</a></li>
<li class="chapter" data-level="29.7.2" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html#shiny"><i class="fa fa-check"></i><b>29.7.2</b> Shiny</a></li>
</ul></li>
<li class="chapter" data-level="29.8" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html#websites"><i class="fa fa-check"></i><b>29.8</b> Websites</a></li>
<li class="chapter" data-level="29.9" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html#other-formats"><i class="fa fa-check"></i><b>29.9</b> Other formats</a></li>
<li class="chapter" data-level="29.10" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html#learning-more-4"><i class="fa fa-check"></i><b>29.10</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="r-markdown-workflow-and-jupyter.html"><a href="r-markdown-workflow-and-jupyter.html"><i class="fa fa-check"></i><b>30</b> R Markdown workflow (and Jupyter)</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Python for Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dates-and-times" class="section level1" number="16">
<h1><span class="header-section-number">16</span> Dates and times</h1>
<!-- https://creativecommons.org/2020/04/21/academic-publications-under-no-derivatives-licenses-is-misguided/ -->
<div id="introduction-10" class="section level2" number="16.1">
<h2><span class="header-section-number">16.1</span> Introduction</h2>
<p>This chapter will show you how to work with dates and times in pandas. At first glance, dates and times seem simple. You use them all the time in your regular life, and they don’t seem to cause much confusion. However, the more you learn about dates and times, the more complicated they seem to get. To warm up, try these three seemingly simple questions:</p>
<ul>
<li>Does every year have 365 days?</li>
<li>Does every day have 24 hours?</li>
<li>Does every minute have 60 seconds?</li>
</ul>
<p>I’m sure you know that not every year has 365 days, but do you know the full rule for determining if a year is a leap year? (It has three parts.) You might have remembered that many parts of the world use daylight savings time (DST), so that some days have 23 hours, and others have 25. You might not have known that some minutes have 61 seconds because every now and then leap seconds are added because the Earth’s rotation is gradually slowing down.</p>
<p>Dates and times are hard because they have to reconcile two physical phenomena (the rotation of the Earth and its orbit around the sun) with a whole raft of geopolitical phenomena including months, time zones, and DST. This chapter won’t teach you every last detail about dates and times, but it will give you a solid grounding of practical skills that will help you with common data analysis challenges.</p>
<div id="prerequisites-10" class="section level3" number="16.1.1">
<h3><span class="header-section-number">16.1.1</span> Prerequisites</h3>
<p>This chapter will focus on the <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html">pandas time series functionality</a> and the <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Timestamp.html">Timestamp</a> methods in pandas, which makes it easier to work with dates and times in Python. We will also need nycflights13 for practice data.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb290-1"><a href="dates-and-times.html#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb290-2"><a href="dates-and-times.html#cb290-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> altair <span class="im">as</span> alt</span>
<span id="cb290-3"><a href="dates-and-times.html#cb290-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb290-4"><a href="dates-and-times.html#cb290-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime</span>
<span id="cb290-5"><a href="dates-and-times.html#cb290-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb290-6"><a href="dates-and-times.html#cb290-6" aria-hidden="true" tabindex="-1"></a>alt.data_transformers.enable(<span class="st">&#39;json&#39;</span>)</span>
<span id="cb290-7"><a href="dates-and-times.html#cb290-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; DataTransformerRegistry.enable(&#39;json&#39;)</span></span>
<span id="cb290-8"><a href="dates-and-times.html#cb290-8" aria-hidden="true" tabindex="-1"></a>flights <span class="op">=</span> pd.read_csv(<span class="st">&quot;https://github.com/byuidatascience/data4python4ds/raw/master/data-raw/flights/flights.csv&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="creating-datetimes" class="section level2" number="16.2">
<h2><span class="header-section-number">16.2</span> Creating date/times</h2>
<p>pandas has two primary types of date/time data that refers to an instant in time:</p>
<ul>
<li>A <strong>datetime</strong> is a date plus a time: it uniquely identifies an
instant in time (typically to the nearest second). pandas reports these types
as <code>datetime64</code>. The NumPy team established this native time series data type.
Being encoded as 64-bit integers allows arrays of dates to be represented very
compactly <a href="https://jakevdp.github.io/PythonDataScienceHandbook/03.11-working-with-time-series.html">ref</a>.</li>
<li>A <strong>Timestamp</strong> is a subclass of a datetime.datetime object. This pandas class
provides the speed and ease of use in handling complex time handling.</li>
</ul>
<p>In this chapter we are only going to focus on dates and date-times. We will focus on the pandas tools for dates and times and use the <code>datetime</code> python module for some elements of handling time in Python.</p>
<p>To get the current date or date-time you can use <code>date.today()</code> or <code>datetime.now()</code>:</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb291-1"><a href="dates-and-times.html#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using datetime</span></span>
<span id="cb291-2"><a href="dates-and-times.html#cb291-2" aria-hidden="true" tabindex="-1"></a>datetime.datetime.today()</span>
<span id="cb291-3"><a href="dates-and-times.html#cb291-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; datetime.datetime(2021, 3, 29, 17, 44, 4, 829614)</span></span>
<span id="cb291-4"><a href="dates-and-times.html#cb291-4" aria-hidden="true" tabindex="-1"></a>datetime.datetime.now()</span>
<span id="cb291-5"><a href="dates-and-times.html#cb291-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; datetime.datetime(2021, 3, 29, 17, 44, 4, 834672)</span></span>
<span id="cb291-6"><a href="dates-and-times.html#cb291-6" aria-hidden="true" tabindex="-1"></a>datetime.datetime.utcnow()</span>
<span id="cb291-7"><a href="dates-and-times.html#cb291-7" aria-hidden="true" tabindex="-1"></a><span class="co"># using pandas</span></span>
<span id="cb291-8"><a href="dates-and-times.html#cb291-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; datetime.datetime(2021, 3, 29, 23, 44, 4, 839823)</span></span>
<span id="cb291-9"><a href="dates-and-times.html#cb291-9" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="st">&#39;today&#39;</span>)</span>
<span id="cb291-10"><a href="dates-and-times.html#cb291-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2021-03-29 17:44:04.845160&#39;)</span></span>
<span id="cb291-11"><a href="dates-and-times.html#cb291-11" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="st">&#39;now&#39;</span>)</span>
<span id="cb291-12"><a href="dates-and-times.html#cb291-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2021-03-29 23:44:04.850661&#39;)</span></span></code></pre></div>
<p>Otherwise, there are three ways you’re likely to create a date/time:</p>
<ul>
<li>From a string.</li>
<li>From individual date-time components.</li>
<li>From an existing date/time object.</li>
</ul>
<p>They work as follows.</p>
<div id="from-strings" class="section level3" number="16.2.1">
<h3><span class="header-section-number">16.2.1</span> From strings</h3>
<p>Date/time data often comes as strings. You’ve seen one approach to parsing strings into date-times in <a href="data-import.html#readr-datetimes">date-times</a>. Another approach is to use the helpers provided by pandas. They can work out the format of unambiguous dates. For example:</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb292-1"><a href="dates-and-times.html#cb292-1" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="st">&quot;2017-01-31&quot;</span>)</span>
<span id="cb292-2"><a href="dates-and-times.html#cb292-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2017-01-31 00:00:00&#39;)</span></span>
<span id="cb292-3"><a href="dates-and-times.html#cb292-3" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="st">&quot;January 31st, 2017&quot;</span>)</span>
<span id="cb292-4"><a href="dates-and-times.html#cb292-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2017-01-31 00:00:00&#39;)</span></span>
<span id="cb292-5"><a href="dates-and-times.html#cb292-5" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="st">&quot;31-Jan-2017&quot;</span>)</span>
<span id="cb292-6"><a href="dates-and-times.html#cb292-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb292-7"><a href="dates-and-times.html#cb292-7" aria-hidden="true" tabindex="-1"></a><span class="co"># using timestamp</span></span>
<span id="cb292-8"><a href="dates-and-times.html#cb292-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2017-01-31 00:00:00&#39;)</span></span>
<span id="cb292-9"><a href="dates-and-times.html#cb292-9" aria-hidden="true" tabindex="-1"></a>pd.Timestamp(<span class="st">&quot;2017-01-31&quot;</span>)</span>
<span id="cb292-10"><a href="dates-and-times.html#cb292-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2017-01-31 00:00:00&#39;)</span></span>
<span id="cb292-11"><a href="dates-and-times.html#cb292-11" aria-hidden="true" tabindex="-1"></a>pd.Timestamp(<span class="st">&quot;January 31st, 2017&quot;</span>)</span>
<span id="cb292-12"><a href="dates-and-times.html#cb292-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2017-01-31 00:00:00&#39;)</span></span>
<span id="cb292-13"><a href="dates-and-times.html#cb292-13" aria-hidden="true" tabindex="-1"></a>pd.Timestamp(<span class="st">&quot;31-Jan-2017&quot;</span>)</span>
<span id="cb292-14"><a href="dates-and-times.html#cb292-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2017-01-31 00:00:00&#39;)</span></span></code></pre></div>
<p>You can specify component order for ambiguous dates with <code>pd.to_datetime()</code>. For example:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb293-1"><a href="dates-and-times.html#cb293-1" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="st">&#39;10-11-09&#39;</span>)</span>
<span id="cb293-2"><a href="dates-and-times.html#cb293-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2009-10-11 00:00:00&#39;)</span></span>
<span id="cb293-3"><a href="dates-and-times.html#cb293-3" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="st">&#39;10-11-09&#39;</span>, yearfirst<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb293-4"><a href="dates-and-times.html#cb293-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2010-11-09 00:00:00&#39;)</span></span>
<span id="cb293-5"><a href="dates-and-times.html#cb293-5" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="st">&#39;10-11-09&#39;</span>, dayfirst<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb293-6"><a href="dates-and-times.html#cb293-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2009-11-10 00:00:00&#39;)</span></span>
<span id="cb293-7"><a href="dates-and-times.html#cb293-7" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="st">&#39;10-11-09&#39;</span>, <span class="bu">format</span> <span class="op">=</span> <span class="st">&#39;</span><span class="sc">%d</span><span class="st">-%y-%m&#39;</span>)</span>
<span id="cb293-8"><a href="dates-and-times.html#cb293-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2011-09-10 00:00:00&#39;)</span></span></code></pre></div>
<p>If you use numbers in <code>pd.to_datetime()</code> it is interpreted as the number of nanoseconds from 1970-01-01. However, the unit can be changed.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb294-1"><a href="dates-and-times.html#cb294-1" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="dv">100000000</span>)</span>
<span id="cb294-2"><a href="dates-and-times.html#cb294-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;1970-01-01 00:00:00.100000&#39;)</span></span>
<span id="cb294-3"><a href="dates-and-times.html#cb294-3" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="dv">100000000</span>, unit <span class="op">=</span> <span class="st">&#39;ns&#39;</span>)</span>
<span id="cb294-4"><a href="dates-and-times.html#cb294-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;1970-01-01 00:00:00.100000&#39;)</span></span>
<span id="cb294-5"><a href="dates-and-times.html#cb294-5" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="dv">1</span>, unit <span class="op">=</span> <span class="st">&#39;s&#39;</span>)</span>
<span id="cb294-6"><a href="dates-and-times.html#cb294-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;1970-01-01 00:00:01&#39;)</span></span></code></pre></div>
<p>To input time into a datetime add the <code>hh:mm:ss</code> format into the string of the parsing function:</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb295-1"><a href="dates-and-times.html#cb295-1" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="st">&quot;2017-01-31 20:11:59&quot;</span>)</span>
<span id="cb295-2"><a href="dates-and-times.html#cb295-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2017-01-31 20:11:59&#39;)</span></span>
<span id="cb295-3"><a href="dates-and-times.html#cb295-3" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="st">&quot;01/31/2017 08:01&quot;</span>)</span>
<span id="cb295-4"><a href="dates-and-times.html#cb295-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2017-01-31 08:01:00&#39;)</span></span>
<span id="cb295-5"><a href="dates-and-times.html#cb295-5" aria-hidden="true" tabindex="-1"></a>pd.Timestamp(<span class="st">&quot;2017-01-31 20:11:59&quot;</span>)</span>
<span id="cb295-6"><a href="dates-and-times.html#cb295-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2017-01-31 20:11:59&#39;)</span></span>
<span id="cb295-7"><a href="dates-and-times.html#cb295-7" aria-hidden="true" tabindex="-1"></a>pd.Timestamp(<span class="st">&quot;01/31/2017 08:01&quot;</span>)</span>
<span id="cb295-8"><a href="dates-and-times.html#cb295-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2017-01-31 08:01:00&#39;)</span></span></code></pre></div>
</div>
<div id="from-individual-components" class="section level3" number="16.2.2">
<h3><span class="header-section-number">16.2.2</span> From individual components</h3>
<p>Instead of a single string, sometimes you’ll have the individual components of the date-time spread across multiple columns. This is what we have in the flights data:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb296-1"><a href="dates-and-times.html#cb296-1" aria-hidden="true" tabindex="-1"></a>flights.<span class="bu">filter</span>([<span class="st">&#39;year&#39;</span>, <span class="st">&#39;month&#39;</span>, <span class="st">&#39;day&#39;</span>, <span class="st">&#39;hour&#39;</span>, <span class="st">&#39;minute&#39;</span>]).head()</span></code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>hour</th>
      <th>minute</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2013</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>15</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2013</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>29</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2013</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>40</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2013</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>45</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2013</td>
      <td>1</td>
      <td>1</td>
      <td>6</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
<p>To create a date/time from this sort of input, use <code>Timestamp()</code>:</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb297-1"><a href="dates-and-times.html#cb297-1" aria-hidden="true" tabindex="-1"></a>(flights.</span>
<span id="cb297-2"><a href="dates-and-times.html#cb297-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">filter</span>([<span class="st">&#39;year&#39;</span>, <span class="st">&#39;month&#39;</span>, <span class="st">&#39;day&#39;</span>, <span class="st">&#39;hour&#39;</span>, <span class="st">&#39;minute&#39;</span>]).</span>
<span id="cb297-3"><a href="dates-and-times.html#cb297-3" aria-hidden="true" tabindex="-1"></a>    assign(departure <span class="op">=</span> pd.to_datetime(flights[[<span class="st">&#39;year&#39;</span>, <span class="st">&#39;month&#39;</span>, <span class="st">&#39;day&#39;</span>, <span class="st">&#39;hour&#39;</span>, <span class="st">&#39;minute&#39;</span>]]))</span>
<span id="cb297-4"><a href="dates-and-times.html#cb297-4" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>hour</th>
      <th>minute</th>
      <th>departure</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2013</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>15</td>
      <td>2013-01-01 05:15:00</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2013</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>29</td>
      <td>2013-01-01 05:29:00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2013</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>40</td>
      <td>2013-01-01 05:40:00</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2013</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>45</td>
      <td>2013-01-01 05:45:00</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2013</td>
      <td>1</td>
      <td>1</td>
      <td>6</td>
      <td>0</td>
      <td>2013-01-01 06:00:00</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>336771</th>
      <td>2013</td>
      <td>9</td>
      <td>30</td>
      <td>14</td>
      <td>55</td>
      <td>2013-09-30 14:55:00</td>
    </tr>
    <tr>
      <th>336772</th>
      <td>2013</td>
      <td>9</td>
      <td>30</td>
      <td>22</td>
      <td>0</td>
      <td>2013-09-30 22:00:00</td>
    </tr>
    <tr>
      <th>336773</th>
      <td>2013</td>
      <td>9</td>
      <td>30</td>
      <td>12</td>
      <td>10</td>
      <td>2013-09-30 12:10:00</td>
    </tr>
    <tr>
      <th>336774</th>
      <td>2013</td>
      <td>9</td>
      <td>30</td>
      <td>11</td>
      <td>59</td>
      <td>2013-09-30 11:59:00</td>
    </tr>
    <tr>
      <th>336775</th>
      <td>2013</td>
      <td>9</td>
      <td>30</td>
      <td>8</td>
      <td>40</td>
      <td>2013-09-30 08:40:00</td>
    </tr>
  </tbody>
</table>
<p>336776 rows × 6 columns</p>
</div>
<p>Let’s do the same thing for each of the four time columns in <code>flights</code>. The times are represented in a slightly odd format, so we use modulus arithmetic to pull out the hour and minute components. Once I’ve created the date-time variables, I focus in on the variables we’ll explore in the rest of the chapter.</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb298-1"><a href="dates-and-times.html#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="co"># parsing function</span></span>
<span id="cb298-2"><a href="dates-and-times.html#cb298-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> make_datetime_100(data, time):</span>
<span id="cb298-3"><a href="dates-and-times.html#cb298-3" aria-hidden="true" tabindex="-1"></a>    date_data <span class="op">=</span> (data[[<span class="st">&#39;year&#39;</span>, <span class="st">&#39;month&#39;</span>, <span class="st">&#39;day&#39;</span>, time]].</span>
<span id="cb298-4"><a href="dates-and-times.html#cb298-4" aria-hidden="true" tabindex="-1"></a>        assign(</span>
<span id="cb298-5"><a href="dates-and-times.html#cb298-5" aria-hidden="true" tabindex="-1"></a>            hour <span class="op">=</span> <span class="kw">lambda</span> x: x[time] <span class="op">//</span> <span class="dv">100</span>,</span>
<span id="cb298-6"><a href="dates-and-times.html#cb298-6" aria-hidden="true" tabindex="-1"></a>            minute <span class="op">=</span> <span class="kw">lambda</span> x: x[time] <span class="op">%</span> <span class="dv">100</span>).</span>
<span id="cb298-7"><a href="dates-and-times.html#cb298-7" aria-hidden="true" tabindex="-1"></a>        <span class="bu">filter</span>([<span class="st">&#39;year&#39;</span>, <span class="st">&#39;month&#39;</span>, <span class="st">&#39;day&#39;</span>, <span class="st">&#39;hour&#39;</span>, <span class="st">&#39;minute&#39;</span>])</span>
<span id="cb298-8"><a href="dates-and-times.html#cb298-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb298-9"><a href="dates-and-times.html#cb298-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb298-10"><a href="dates-and-times.html#cb298-10" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> pd.to_datetime(date_data)</span>
<span id="cb298-11"><a href="dates-and-times.html#cb298-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-12"><a href="dates-and-times.html#cb298-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> out</span>
<span id="cb298-13"><a href="dates-and-times.html#cb298-13" aria-hidden="true" tabindex="-1"></a><span class="co"># data table</span></span>
<span id="cb298-14"><a href="dates-and-times.html#cb298-14" aria-hidden="true" tabindex="-1"></a>flights_dt <span class="op">=</span> (flights.</span>
<span id="cb298-15"><a href="dates-and-times.html#cb298-15" aria-hidden="true" tabindex="-1"></a>    query(<span class="st">&#39;(dep_time.notna()) &amp; (arr_time.notna())&#39;</span>).</span>
<span id="cb298-16"><a href="dates-and-times.html#cb298-16" aria-hidden="true" tabindex="-1"></a>    assign(</span>
<span id="cb298-17"><a href="dates-and-times.html#cb298-17" aria-hidden="true" tabindex="-1"></a>        dep_time <span class="op">=</span> <span class="kw">lambda</span> x: make_datetime_100(x, <span class="st">&#39;dep_time&#39;</span>),</span>
<span id="cb298-18"><a href="dates-and-times.html#cb298-18" aria-hidden="true" tabindex="-1"></a>        arr_time <span class="op">=</span> <span class="kw">lambda</span> x: make_datetime_100(x, <span class="st">&#39;arr_time&#39;</span>),</span>
<span id="cb298-19"><a href="dates-and-times.html#cb298-19" aria-hidden="true" tabindex="-1"></a>        sched_dep_time <span class="op">=</span> <span class="kw">lambda</span> x: make_datetime_100(x, <span class="st">&#39;sched_dep_time&#39;</span>),</span>
<span id="cb298-20"><a href="dates-and-times.html#cb298-20" aria-hidden="true" tabindex="-1"></a>        sched_arr_time <span class="op">=</span> <span class="kw">lambda</span> x: make_datetime_100(x, <span class="st">&#39;sched_arr_time&#39;</span>)</span>
<span id="cb298-21"><a href="dates-and-times.html#cb298-21" aria-hidden="true" tabindex="-1"></a>    ).</span>
<span id="cb298-22"><a href="dates-and-times.html#cb298-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">filter</span>( regex <span class="op">=</span> <span class="st">&#39;origin|dest|delay$|time$&#39;</span>)</span>
<span id="cb298-23"><a href="dates-and-times.html#cb298-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb298-24"><a href="dates-and-times.html#cb298-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-25"><a href="dates-and-times.html#cb298-25" aria-hidden="true" tabindex="-1"></a>flights_dt</span></code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dep_time</th>
      <th>sched_dep_time</th>
      <th>dep_delay</th>
      <th>arr_time</th>
      <th>sched_arr_time</th>
      <th>arr_delay</th>
      <th>origin</th>
      <th>dest</th>
      <th>air_time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2013-01-01 05:17:00</td>
      <td>2013-01-01 05:15:00</td>
      <td>2.0</td>
      <td>2013-01-01 08:30:00</td>
      <td>2013-01-01 08:19:00</td>
      <td>11.0</td>
      <td>EWR</td>
      <td>IAH</td>
      <td>227.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2013-01-01 05:33:00</td>
      <td>2013-01-01 05:29:00</td>
      <td>4.0</td>
      <td>2013-01-01 08:50:00</td>
      <td>2013-01-01 08:30:00</td>
      <td>20.0</td>
      <td>LGA</td>
      <td>IAH</td>
      <td>227.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2013-01-01 05:42:00</td>
      <td>2013-01-01 05:40:00</td>
      <td>2.0</td>
      <td>2013-01-01 09:23:00</td>
      <td>2013-01-01 08:50:00</td>
      <td>33.0</td>
      <td>JFK</td>
      <td>MIA</td>
      <td>160.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2013-01-01 05:44:00</td>
      <td>2013-01-01 05:45:00</td>
      <td>-1.0</td>
      <td>2013-01-01 10:04:00</td>
      <td>2013-01-01 10:22:00</td>
      <td>-18.0</td>
      <td>JFK</td>
      <td>BQN</td>
      <td>183.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2013-01-01 05:54:00</td>
      <td>2013-01-01 06:00:00</td>
      <td>-6.0</td>
      <td>2013-01-01 08:12:00</td>
      <td>2013-01-01 08:37:00</td>
      <td>-25.0</td>
      <td>LGA</td>
      <td>ATL</td>
      <td>116.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>336765</th>
      <td>2013-09-30 22:40:00</td>
      <td>2013-09-30 22:45:00</td>
      <td>-5.0</td>
      <td>2013-09-30 23:34:00</td>
      <td>2013-09-30 23:51:00</td>
      <td>-17.0</td>
      <td>JFK</td>
      <td>SYR</td>
      <td>41.0</td>
    </tr>
    <tr>
      <th>336766</th>
      <td>2013-09-30 22:40:00</td>
      <td>2013-09-30 22:50:00</td>
      <td>-10.0</td>
      <td>2013-09-30 23:47:00</td>
      <td>2013-09-30 00:07:00</td>
      <td>-20.0</td>
      <td>JFK</td>
      <td>BUF</td>
      <td>52.0</td>
    </tr>
    <tr>
      <th>336767</th>
      <td>2013-09-30 22:41:00</td>
      <td>2013-09-30 22:46:00</td>
      <td>-5.0</td>
      <td>2013-09-30 23:45:00</td>
      <td>2013-09-30 00:01:00</td>
      <td>-16.0</td>
      <td>JFK</td>
      <td>ROC</td>
      <td>47.0</td>
    </tr>
    <tr>
      <th>336768</th>
      <td>2013-09-30 23:07:00</td>
      <td>2013-09-30 22:55:00</td>
      <td>12.0</td>
      <td>2013-09-30 23:59:00</td>
      <td>2013-09-30 23:58:00</td>
      <td>1.0</td>
      <td>JFK</td>
      <td>BOS</td>
      <td>33.0</td>
    </tr>
    <tr>
      <th>336769</th>
      <td>2013-09-30 23:49:00</td>
      <td>2013-09-30 23:59:00</td>
      <td>-10.0</td>
      <td>2013-09-30 03:25:00</td>
      <td>2013-09-30 03:50:00</td>
      <td>-25.0</td>
      <td>JFK</td>
      <td>PSE</td>
      <td>196.0</td>
    </tr>
  </tbody>
</table>
<p>328063 rows × 9 columns</p>
</div>
<p>With this data, I can visualise the distribution of departure times across the year:</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb299-1"><a href="dates-and-times.html#cb299-1" aria-hidden="true" tabindex="-1"></a>dat_plot <span class="op">=</span> (flights_dt.</span>
<span id="cb299-2"><a href="dates-and-times.html#cb299-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">filter</span>([<span class="st">&#39;dep_time&#39;</span>]).</span>
<span id="cb299-3"><a href="dates-and-times.html#cb299-3" aria-hidden="true" tabindex="-1"></a>    assign(dpd <span class="op">=</span> flights_dt.dep_time.dt.floor(<span class="st">&quot;D&quot;</span>)).</span>
<span id="cb299-4"><a href="dates-and-times.html#cb299-4" aria-hidden="true" tabindex="-1"></a>    groupby([<span class="st">&#39;dpd&#39;</span>], as_index <span class="op">=</span> <span class="va">False</span>).</span>
<span id="cb299-5"><a href="dates-and-times.html#cb299-5" aria-hidden="true" tabindex="-1"></a>    count())</span>
<span id="cb299-6"><a href="dates-and-times.html#cb299-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb299-7"><a href="dates-and-times.html#cb299-7" aria-hidden="true" tabindex="-1"></a>chart <span class="op">=</span> (alt.Chart(dat_plot).</span>
<span id="cb299-8"><a href="dates-and-times.html#cb299-8" aria-hidden="true" tabindex="-1"></a>          encode(x <span class="op">=</span> <span class="st">&#39;dpd&#39;</span>, y <span class="op">=</span> <span class="st">&#39;dep_time&#39;</span>).</span>
<span id="cb299-9"><a href="dates-and-times.html#cb299-9" aria-hidden="true" tabindex="-1"></a>          mark_line()) </span>
<span id="cb299-10"><a href="dates-and-times.html#cb299-10" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb299-11"><a href="dates-and-times.html#cb299-11" aria-hidden="true" tabindex="-1"></a>chart.save(<span class="st">&quot;screenshots/altair_datetimes_1.png&quot;</span>)</span></code></pre></div>
<p><img src="screenshots/altair_datetimes_1.png" width="70%" style="display: block; margin: auto auto auto 0;" /></p>
<p>Or within a single day:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb300-1"><a href="dates-and-times.html#cb300-1" aria-hidden="true" tabindex="-1"></a>dat_plot <span class="op">=</span> (flights_dt.<span class="bu">filter</span>([<span class="st">&#39;dep_time&#39;</span>]).query(<span class="st">&quot;dep_time &lt; 20130102&quot;</span>).</span>
<span id="cb300-2"><a href="dates-and-times.html#cb300-2" aria-hidden="true" tabindex="-1"></a>    assign(dpd <span class="op">=</span> flights_dt.dep_time.dt.floor(<span class="st">&quot;10min&quot;</span>)).</span>
<span id="cb300-3"><a href="dates-and-times.html#cb300-3" aria-hidden="true" tabindex="-1"></a>    groupby([<span class="st">&#39;dpd&#39;</span>], as_index <span class="op">=</span> <span class="va">False</span>).</span>
<span id="cb300-4"><a href="dates-and-times.html#cb300-4" aria-hidden="true" tabindex="-1"></a>    count())</span>
<span id="cb300-5"><a href="dates-and-times.html#cb300-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb300-6"><a href="dates-and-times.html#cb300-6" aria-hidden="true" tabindex="-1"></a>chart <span class="op">=</span> (alt.Chart(dat_plot).</span>
<span id="cb300-7"><a href="dates-and-times.html#cb300-7" aria-hidden="true" tabindex="-1"></a>    encode(x <span class="op">=</span> <span class="st">&#39;dpd&#39;</span>, y <span class="op">=</span> <span class="st">&#39;dep_time&#39;</span>).</span>
<span id="cb300-8"><a href="dates-and-times.html#cb300-8" aria-hidden="true" tabindex="-1"></a>    mark_line())</span>
<span id="cb300-9"><a href="dates-and-times.html#cb300-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb300-10"><a href="dates-and-times.html#cb300-10" aria-hidden="true" tabindex="-1"></a>chart.save(<span class="st">&quot;screenshots/altair_datetimes_2.png&quot;</span>)</span></code></pre></div>
<p><img src="screenshots/altair_datetimes_2.png" width="70%" style="display: block; margin: auto auto auto 0;" /></p>
</div>
<div id="from-other-types" class="section level3" number="16.2.3">
<h3><span class="header-section-number">16.2.3</span> From other types</h3>
<p>Sometimes you’ll get date/times as numeric offsets from the “Unix Epoch”, 1970-01-01. If the offset is in seconds, use <code>as_datetime()</code>; if it’s in days, use <code>as_date()</code>.</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb301-1"><a href="dates-and-times.html#cb301-1" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="dv">60</span> <span class="op">*</span> <span class="dv">60</span> <span class="op">*</span> <span class="dv">10</span>, unit <span class="op">=</span> <span class="st">&#39;s&#39;</span>)</span>
<span id="cb301-2"><a href="dates-and-times.html#cb301-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;1970-01-01 10:00:00&#39;)</span></span>
<span id="cb301-3"><a href="dates-and-times.html#cb301-3" aria-hidden="true" tabindex="-1"></a>pd.to_datetime(<span class="dv">365</span> <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="dv">2</span>, unit <span class="op">=</span> <span class="st">&#39;d&#39;</span>)</span>
<span id="cb301-4"><a href="dates-and-times.html#cb301-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;1980-01-01 00:00:00&#39;)</span></span></code></pre></div>
</div>
<div id="exercises-40" class="section level3" number="16.2.4">
<h3><span class="header-section-number">16.2.4</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>What happens if you parse a string that contains invalid dates?</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb302-1"><a href="dates-and-times.html#cb302-1" aria-hidden="true" tabindex="-1"></a>pd.to_datetime([<span class="st">&#39;2010-10-10&#39;</span>, <span class="st">&#39;bananas&#39;</span>])</span>
<span id="cb302-2"><a href="dates-and-times.html#cb302-2" aria-hidden="true" tabindex="-1"></a>pd.to_datetime([<span class="st">&#39;2010-10-10&#39;</span>, <span class="st">&#39;bananas&#39;</span>], errors <span class="op">=</span> <span class="st">&#39;coerce&#39;</span>)</span></code></pre></div></li>
</ol>
</div>
</div>
<div id="date-time-components" class="section level2" number="16.3">
<h2><span class="header-section-number">16.3</span> Date-time components</h2>
<p>Now that you know how to get date-time data into Python’s datetime data structures, let’s explore what you can do with them. This section will focus on the <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#time-date-components">Timestamp properites</a> that let you get and set individual components. The next section will look at how arithmetic works with datetimes.</p>
<div id="getting-components" class="section level3" number="16.3.1">
<h3><span class="header-section-number">16.3.1</span> Getting components</h3>
<p>You can pull out individual parts of the date with the accessor properties <code>.year</code>, <code>.month</code>, <code>.day()</code> (day of the month), <code>.dayofyear</code> (day of the year), <code>.dayofweek</code> (day of the week), <code>.hour</code>, <code>.minute</code>, and <code>.second</code>. When using these properties on a pandas series you must include <code>.dt.</code> as in <code>&lt;PANDAS SERIES&gt;.dt.month</code>.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb303-1"><a href="dates-and-times.html#cb303-1" aria-hidden="true" tabindex="-1"></a>datetime <span class="op">=</span> pd.to_datetime(<span class="st">&quot;2016-07-08 12:34:56&quot;</span>)</span>
<span id="cb303-2"><a href="dates-and-times.html#cb303-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb303-3"><a href="dates-and-times.html#cb303-3" aria-hidden="true" tabindex="-1"></a>datetime.year</span>
<span id="cb303-4"><a href="dates-and-times.html#cb303-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2016</span></span>
<span id="cb303-5"><a href="dates-and-times.html#cb303-5" aria-hidden="true" tabindex="-1"></a>datetime.month</span>
<span id="cb303-6"><a href="dates-and-times.html#cb303-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7</span></span>
<span id="cb303-7"><a href="dates-and-times.html#cb303-7" aria-hidden="true" tabindex="-1"></a>datetime.day</span>
<span id="cb303-8"><a href="dates-and-times.html#cb303-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8</span></span>
<span id="cb303-9"><a href="dates-and-times.html#cb303-9" aria-hidden="true" tabindex="-1"></a>datetime.dayofyear</span>
<span id="cb303-10"><a href="dates-and-times.html#cb303-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 190</span></span>
<span id="cb303-11"><a href="dates-and-times.html#cb303-11" aria-hidden="true" tabindex="-1"></a>datetime.dayofweek</span>
<span id="cb303-12"><a href="dates-and-times.html#cb303-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4</span></span></code></pre></div>
<p>To return the name of the month or day of the week use the two name methods <code>.day_name()</code> and <code>month_name()</code>.</p>
<pre class="pandas"><code>datetime.month_name()
datetime.day_name()</code></pre>
<p>We can use <code>.day_name()</code> in pandas to create a new variable for your chart or use <code>day()</code> in Altair to build the date variable only for the chart using the <a href="https://altair-viz.github.io/user_guide/transform/timeunit.html">TimeUnit transforms</a> to see that more flights depart during the week than on the weekend:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb305-1"><a href="dates-and-times.html#cb305-1" aria-hidden="true" tabindex="-1"></a>flights_dt.dep_time.dt.day_name()</span>
<span id="cb305-2"><a href="dates-and-times.html#cb305-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0         Tuesday</span></span>
<span id="cb305-3"><a href="dates-and-times.html#cb305-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         Tuesday</span></span>
<span id="cb305-4"><a href="dates-and-times.html#cb305-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         Tuesday</span></span>
<span id="cb305-5"><a href="dates-and-times.html#cb305-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         Tuesday</span></span>
<span id="cb305-6"><a href="dates-and-times.html#cb305-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         Tuesday</span></span>
<span id="cb305-7"><a href="dates-and-times.html#cb305-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            ...   </span></span>
<span id="cb305-8"><a href="dates-and-times.html#cb305-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 336765     Monday</span></span>
<span id="cb305-9"><a href="dates-and-times.html#cb305-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 336766     Monday</span></span>
<span id="cb305-10"><a href="dates-and-times.html#cb305-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 336767     Monday</span></span>
<span id="cb305-11"><a href="dates-and-times.html#cb305-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 336768     Monday</span></span>
<span id="cb305-12"><a href="dates-and-times.html#cb305-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 336769     Monday</span></span>
<span id="cb305-13"><a href="dates-and-times.html#cb305-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Name: dep_time, Length: 328063, dtype: object</span></span>
<span id="cb305-14"><a href="dates-and-times.html#cb305-14" aria-hidden="true" tabindex="-1"></a>chart <span class="op">=</span> (alt.Chart(flights_dt).</span>
<span id="cb305-15"><a href="dates-and-times.html#cb305-15" aria-hidden="true" tabindex="-1"></a>  encode(alt.X(<span class="st">&#39;day(dep_time):O&#39;</span>), alt.Y(<span class="st">&#39;count()&#39;</span>)).</span>
<span id="cb305-16"><a href="dates-and-times.html#cb305-16" aria-hidden="true" tabindex="-1"></a>  mark_bar().</span>
<span id="cb305-17"><a href="dates-and-times.html#cb305-17" aria-hidden="true" tabindex="-1"></a>  properties(width <span class="op">=</span> <span class="dv">400</span>))</span>
<span id="cb305-18"><a href="dates-and-times.html#cb305-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb305-19"><a href="dates-and-times.html#cb305-19" aria-hidden="true" tabindex="-1"></a>chart.save(<span class="st">&quot;screenshots/altair_datetimes_3.png&quot;</span>)</span></code></pre></div>
<p><img src="screenshots/altair_datetimes_3.png" width="70%" style="display: block; margin: auto auto auto 0;" /></p>
<p>There’s an interesting pattern if we look at the average departure delay by minute within the hour. It looks like flights leaving in minutes 20-30 and 50-60 have much lower delays than the rest of the hour!</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb306-1"><a href="dates-and-times.html#cb306-1" aria-hidden="true" tabindex="-1"></a>plot_dat <span class="op">=</span> (flights_dt.assign(</span>
<span id="cb306-2"><a href="dates-and-times.html#cb306-2" aria-hidden="true" tabindex="-1"></a>    minute <span class="op">=</span> <span class="kw">lambda</span> x: x.dep_time.dt.minute).</span>
<span id="cb306-3"><a href="dates-and-times.html#cb306-3" aria-hidden="true" tabindex="-1"></a>    groupby(<span class="st">&#39;minute&#39;</span>).</span>
<span id="cb306-4"><a href="dates-and-times.html#cb306-4" aria-hidden="true" tabindex="-1"></a>    agg(</span>
<span id="cb306-5"><a href="dates-and-times.html#cb306-5" aria-hidden="true" tabindex="-1"></a>        avg_delay <span class="op">=</span> (<span class="st">&#39;arr_delay&#39;</span>, np.mean),</span>
<span id="cb306-6"><a href="dates-and-times.html#cb306-6" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> (<span class="st">&#39;arr_delay&#39;</span>, <span class="st">&#39;size&#39;</span>)</span>
<span id="cb306-7"><a href="dates-and-times.html#cb306-7" aria-hidden="true" tabindex="-1"></a>    ).reset_index()</span>
<span id="cb306-8"><a href="dates-and-times.html#cb306-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb306-9"><a href="dates-and-times.html#cb306-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb306-10"><a href="dates-and-times.html#cb306-10" aria-hidden="true" tabindex="-1"></a>chart <span class="op">=</span> (alt.Chart(plot_dat).</span>
<span id="cb306-11"><a href="dates-and-times.html#cb306-11" aria-hidden="true" tabindex="-1"></a>  encode(alt.X(<span class="st">&#39;minute&#39;</span>), alt.Y(<span class="st">&#39;avg_delay&#39;</span>)).</span>
<span id="cb306-12"><a href="dates-and-times.html#cb306-12" aria-hidden="true" tabindex="-1"></a>  mark_line())</span>
<span id="cb306-13"><a href="dates-and-times.html#cb306-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb306-14"><a href="dates-and-times.html#cb306-14" aria-hidden="true" tabindex="-1"></a>chart.save(<span class="st">&quot;screenshots/altair_datetimes_4.png&quot;</span>)</span></code></pre></div>
<p><img src="screenshots/altair_datetimes_4.png" width="70%" style="display: block; margin: auto auto auto 0;" /></p>
<p>Interestingly, if we look at the <em>scheduled</em> departure time we don’t see such a strong pattern:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb307-1"><a href="dates-and-times.html#cb307-1" aria-hidden="true" tabindex="-1"></a>sched_dep <span class="op">=</span> (flights_dt.assign(</span>
<span id="cb307-2"><a href="dates-and-times.html#cb307-2" aria-hidden="true" tabindex="-1"></a>    minute <span class="op">=</span> <span class="kw">lambda</span> x: x.sched_dep_time.dt.minute).</span>
<span id="cb307-3"><a href="dates-and-times.html#cb307-3" aria-hidden="true" tabindex="-1"></a>    groupby(<span class="st">&#39;minute&#39;</span>).</span>
<span id="cb307-4"><a href="dates-and-times.html#cb307-4" aria-hidden="true" tabindex="-1"></a>    agg(</span>
<span id="cb307-5"><a href="dates-and-times.html#cb307-5" aria-hidden="true" tabindex="-1"></a>        avg_delay <span class="op">=</span> (<span class="st">&#39;arr_delay&#39;</span>, np.mean),</span>
<span id="cb307-6"><a href="dates-and-times.html#cb307-6" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> (<span class="st">&#39;arr_delay&#39;</span>, <span class="st">&#39;size&#39;</span>)</span>
<span id="cb307-7"><a href="dates-and-times.html#cb307-7" aria-hidden="true" tabindex="-1"></a>    ).reset_index()</span>
<span id="cb307-8"><a href="dates-and-times.html#cb307-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb307-9"><a href="dates-and-times.html#cb307-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-10"><a href="dates-and-times.html#cb307-10" aria-hidden="true" tabindex="-1"></a>chart <span class="op">=</span> (alt.Chart(sched_dep).</span>
<span id="cb307-11"><a href="dates-and-times.html#cb307-11" aria-hidden="true" tabindex="-1"></a>  encode(alt.X(<span class="st">&#39;minute&#39;</span>), alt.Y(<span class="st">&#39;avg_delay&#39;</span>)).</span>
<span id="cb307-12"><a href="dates-and-times.html#cb307-12" aria-hidden="true" tabindex="-1"></a>  mark_line())</span>
<span id="cb307-13"><a href="dates-and-times.html#cb307-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb307-14"><a href="dates-and-times.html#cb307-14" aria-hidden="true" tabindex="-1"></a>chart.save(<span class="st">&quot;screenshots/altair_datetimes_5.png&quot;</span>)</span></code></pre></div>
<p><img src="screenshots/altair_datetimes_5.png" width="70%" style="display: block; margin: auto auto auto 0;" /></p>
<p>So why do we see that pattern with the actual departure times? Well, like much data collected by humans, there’s a strong bias towards flights leaving at “nice” departure times. Always be alert for this sort of pattern whenever you work with data that involves human judgement!</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb308-1"><a href="dates-and-times.html#cb308-1" aria-hidden="true" tabindex="-1"></a>chart <span class="op">=</span> (alt.Chart(sched_dep).</span>
<span id="cb308-2"><a href="dates-and-times.html#cb308-2" aria-hidden="true" tabindex="-1"></a>  encode(alt.X(<span class="st">&#39;minute&#39;</span>), alt.Y(<span class="st">&#39;n&#39;</span>)).</span>
<span id="cb308-3"><a href="dates-and-times.html#cb308-3" aria-hidden="true" tabindex="-1"></a>  mark_line())</span>
<span id="cb308-4"><a href="dates-and-times.html#cb308-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb308-5"><a href="dates-and-times.html#cb308-5" aria-hidden="true" tabindex="-1"></a>chart.save(<span class="st">&quot;screenshots/altair_datetimes_6.png&quot;</span>)</span></code></pre></div>
<p><img src="screenshots/altair_datetimes_6.png" width="70%" style="display: block; margin: auto auto auto 0;" /></p>
</div>
<div id="rounding" class="section level3" number="16.3.2">
<h3><span class="header-section-number">16.3.2</span> Rounding</h3>
<p>An alternative approach to plotting individual components is to round the date to a nearby unit of time, with <code>.dt.floor()</code>, <code>.dt.round()</code>, and <code>.dt.ceiling()</code>. However, these methods don’t work well for coarser roundings. For example, finding the floor of week does not work using <code>dt.floor()</code> and the recommended approach is to use <code>.dt.to_period()</code> in tandem with <code>.dt.to_timestep()</code> as we do in the following example. Each method takes a Series of datetimes to adjust and then the name of the unit round down (floor), round up (ceiling), or round to. This, for example, allows us to plot the number of flights per week:</p>
<p><a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#timeseries-offset-aliases" class="uri">https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#timeseries-offset-aliases</a></p>
<div class="sourceCode" id="cb309"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb309-1"><a href="dates-and-times.html#cb309-1" aria-hidden="true" tabindex="-1"></a>plot_dat <span class="op">=</span> flights_dt.assign(</span>
<span id="cb309-2"><a href="dates-and-times.html#cb309-2" aria-hidden="true" tabindex="-1"></a>    week <span class="op">=</span> <span class="kw">lambda</span> x: x.dep_time.dt.to_period(<span class="st">&quot;W&quot;</span>).dt.to_timestamp()</span>
<span id="cb309-3"><a href="dates-and-times.html#cb309-3" aria-hidden="true" tabindex="-1"></a>    ).groupby(<span class="st">&#39;week&#39;</span>).agg(</span>
<span id="cb309-4"><a href="dates-and-times.html#cb309-4" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> (<span class="st">&#39;dep_time&#39;</span>, <span class="st">&#39;size&#39;</span>)</span>
<span id="cb309-5"><a href="dates-and-times.html#cb309-5" aria-hidden="true" tabindex="-1"></a>    ).reset_index()</span>
<span id="cb309-6"><a href="dates-and-times.html#cb309-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-7"><a href="dates-and-times.html#cb309-7" aria-hidden="true" tabindex="-1"></a>chart <span class="op">=</span> (alt.Chart(plot_dat).</span>
<span id="cb309-8"><a href="dates-and-times.html#cb309-8" aria-hidden="true" tabindex="-1"></a>  encode(alt.X(<span class="st">&#39;week&#39;</span>), alt.Y(<span class="st">&#39;n&#39;</span>)).</span>
<span id="cb309-9"><a href="dates-and-times.html#cb309-9" aria-hidden="true" tabindex="-1"></a>  mark_line())</span>
<span id="cb309-10"><a href="dates-and-times.html#cb309-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-11"><a href="dates-and-times.html#cb309-11" aria-hidden="true" tabindex="-1"></a>chart.save(<span class="st">&quot;screenshots/altair_datetimes_7.png&quot;</span>)</span></code></pre></div>
<p><img src="screenshots/altair_datetimes_7.png" width="70%" style="display: block; margin: auto auto auto 0;" /></p>
<p>Computing the difference between a rounded and unrounded date can be particularly useful.</p>
</div>
<div id="setting-components" class="section level3" number="16.3.3">
<h3><span class="header-section-number">16.3.3</span> Setting components</h3>
<p>You can also use each accessor function to set the components of a date/time:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb310-1"><a href="dates-and-times.html#cb310-1" aria-hidden="true" tabindex="-1"></a>datetime <span class="op">=</span> pd.Timestamp(<span class="st">&quot;2016-07-08 12:34:56&quot;</span>)</span>
<span id="cb310-2"><a href="dates-and-times.html#cb310-2" aria-hidden="true" tabindex="-1"></a>datetime.replace(year <span class="op">=</span> <span class="dv">2020</span>)</span>
<span id="cb310-3"><a href="dates-and-times.html#cb310-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2020-07-08 12:34:56&#39;)</span></span>
<span id="cb310-4"><a href="dates-and-times.html#cb310-4" aria-hidden="true" tabindex="-1"></a>datetime.replace(month <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb310-5"><a href="dates-and-times.html#cb310-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2016-01-08 12:34:56&#39;)</span></span>
<span id="cb310-6"><a href="dates-and-times.html#cb310-6" aria-hidden="true" tabindex="-1"></a>datetime.replace(hour <span class="op">=</span> datetime.hour <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb310-7"><a href="dates-and-times.html#cb310-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2016-07-08 13:34:56&#39;)</span></span></code></pre></div>
<p>Alternatively, Rather than modifying each separately, you can create a new date-time with <code>replace()</code> using all of the arguments. This allows you to set multiple values at once.</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb311-1"><a href="dates-and-times.html#cb311-1" aria-hidden="true" tabindex="-1"></a>datetime.replace(year <span class="op">=</span> <span class="dv">2020</span>, month <span class="op">=</span> <span class="dv">2</span>, day <span class="op">=</span> <span class="dv">2</span>, hour <span class="op">=</span> <span class="dv">2</span>)</span>
<span id="cb311-2"><a href="dates-and-times.html#cb311-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2020-02-02 02:34:56&#39;)</span></span></code></pre></div>
<p>If values are too big, you will see an error:</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb312-1"><a href="dates-and-times.html#cb312-1" aria-hidden="true" tabindex="-1"></a>pd.Timestamp(<span class="st">&quot;2015-02-01&quot;</span>).replace(day <span class="op">=</span> <span class="dv">30</span>)</span>
<span id="cb312-2"><a href="dates-and-times.html#cb312-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in py_call_impl(callable, dots$args, dots$keywords): ValueError: day is out of range for month</span></span>
<span id="cb312-3"><a href="dates-and-times.html#cb312-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb312-4"><a href="dates-and-times.html#cb312-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Detailed traceback:</span></span>
<span id="cb312-5"><a href="dates-and-times.html#cb312-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;</span></span>
<span id="cb312-6"><a href="dates-and-times.html#cb312-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   File &quot;pandas/_libs/tslibs/timestamps.pyx&quot;, line 1454, in pandas._libs.tslibs.timestamps.Timestamp.replace</span></span></code></pre></div>
<p>You can use <code>replace()</code> to show the distribution of flights across the course of the day for every day of the year:</p>
<p><strong>Note:</strong> The <code>Timestamp.replace()</code> method does not have an equivalent method that can be used on pandas Series so you will need to use an <code>apply()</code> method on the datetime series. We have avoided the use of <code>apply()</code> in this book up to this point. <code>apply()</code> is a powerful technique within pandas that is worth your time to master. You can read <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html">the pandas documentation</a> to find additional help.</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb313-1"><a href="dates-and-times.html#cb313-1" aria-hidden="true" tabindex="-1"></a>plot_dat <span class="op">=</span> flights_dt.assign(</span>
<span id="cb313-2"><a href="dates-and-times.html#cb313-2" aria-hidden="true" tabindex="-1"></a>    dep_hour <span class="op">=</span> <span class="kw">lambda</span> x: x.dep_time.<span class="bu">apply</span>(<span class="kw">lambda</span> y: y.replace(month <span class="op">=</span> <span class="dv">1</span>, day <span class="op">=</span> <span class="dv">1</span>))</span>
<span id="cb313-3"><a href="dates-and-times.html#cb313-3" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb313-4"><a href="dates-and-times.html#cb313-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb313-5"><a href="dates-and-times.html#cb313-5" aria-hidden="true" tabindex="-1"></a>chart <span class="op">=</span> (alt.Chart(plot_dat).</span>
<span id="cb313-6"><a href="dates-and-times.html#cb313-6" aria-hidden="true" tabindex="-1"></a>  encode(alt.X(<span class="st">&#39;dep_hour&#39;</span>), alt.Y(<span class="st">&#39;count()&#39;</span>)).</span>
<span id="cb313-7"><a href="dates-and-times.html#cb313-7" aria-hidden="true" tabindex="-1"></a>  mark_line())</span>
<span id="cb313-8"><a href="dates-and-times.html#cb313-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb313-9"><a href="dates-and-times.html#cb313-9" aria-hidden="true" tabindex="-1"></a>chart.save(<span class="st">&quot;screenshots/altair_datetimes_8.png&quot;</span>)</span></code></pre></div>
<p><img src="screenshots/altair_datetimes_8.png" width="70%" style="display: block; margin: auto auto auto 0;" /></p>
<p>Setting larger components of a date to a constant is a powerful technique that allows you to explore patterns in the smaller components.</p>
</div>
<div id="exercises-41" class="section level3" number="16.3.4">
<h3><span class="header-section-number">16.3.4</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>How does the distribution of flight times within a day change over the
course of the year?</p></li>
<li><p>Compare <code>dep_time</code>, <code>sched_dep_time</code> and <code>dep_delay</code>. Are they consistent?
Explain your findings.</p></li>
<li><p>Compare <code>air_time</code> with the duration between the departure and arrival.
Explain your findings. (Hint: consider the location of the airport.)</p></li>
<li><p>How does the average delay time change over the course of a day?
Should you use <code>dep_time</code> or <code>sched_dep_time</code>? Why?</p></li>
<li><p>On what day of the week should you leave if you want to minimise the
chance of a delay?</p></li>
<li><p>What makes the distribution of <code>diamonds.carat</code> and
<code>flights.sched_dep_time</code> similar?</p></li>
<li><p>Confirm my hypothesis that the early departures of flights in minutes
20-30 and 50-60 are caused by scheduled flights that leave early.
Hint: create a binary variable that tells you whether or not a flight
was delayed.</p></li>
</ol>
</div>
</div>
<div id="time-spans-deltas" class="section level2" number="16.4">
<h2><span class="header-section-number">16.4</span> Time spans (Deltas)</h2>
<p>Next you’ll learn about how arithmetic with dates work, including subtraction, addition, and division. Along the way, you’ll learn about pandas tools for representing time spans. In Python, when you subtract two dates, you get a Timedelta object:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb314-1"><a href="dates-and-times.html#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="co"># How old is Hathaway?</span></span>
<span id="cb314-2"><a href="dates-and-times.html#cb314-2" aria-hidden="true" tabindex="-1"></a>h_age <span class="op">=</span> pd.Timestamp.now() <span class="op">-</span> pd.Timestamp(<span class="st">&quot;19770907&quot;</span>)</span>
<span id="cb314-3"><a href="dates-and-times.html#cb314-3" aria-hidden="true" tabindex="-1"></a>h_age</span>
<span id="cb314-4"><a href="dates-and-times.html#cb314-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timedelta(&#39;15909 days 17:44:53.211199&#39;)</span></span></code></pre></div>
<p>A Timedelta object records a time span in nanoseconds using 64 bit integers which can make Timedeltas a little painful to work with, so Timedelta provides access to the number of days with <code>.days</code> and the number of seconds with <code>.total_seconds()</code>.</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb315-1"><a href="dates-and-times.html#cb315-1" aria-hidden="true" tabindex="-1"></a>h_age.days</span>
<span id="cb315-2"><a href="dates-and-times.html#cb315-2" aria-hidden="true" tabindex="-1"></a>h_age.days <span class="op">//</span> <span class="dv">365</span> <span class="co"># to get years</span></span>
<span id="cb315-3"><a href="dates-and-times.html#cb315-3" aria-hidden="true" tabindex="-1"></a>h_age.total_seconds()</span></code></pre></div>
<p>Timedeltas come with a bunch of convenient constructors:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb316-1"><a href="dates-and-times.html#cb316-1" aria-hidden="true" tabindex="-1"></a>pd.Timedelta(seconds <span class="op">=</span> <span class="dv">15</span>)</span>
<span id="cb316-2"><a href="dates-and-times.html#cb316-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timedelta(&#39;0 days 00:00:15&#39;)</span></span>
<span id="cb316-3"><a href="dates-and-times.html#cb316-3" aria-hidden="true" tabindex="-1"></a>pd.Timedelta(minutes <span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb316-4"><a href="dates-and-times.html#cb316-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timedelta(&#39;0 days 00:10:00&#39;)</span></span>
<span id="cb316-5"><a href="dates-and-times.html#cb316-5" aria-hidden="true" tabindex="-1"></a>pd.Timedelta(hours <span class="op">=</span> <span class="dv">12</span>)</span>
<span id="cb316-6"><a href="dates-and-times.html#cb316-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timedelta(&#39;0 days 12:00:00&#39;)</span></span>
<span id="cb316-7"><a href="dates-and-times.html#cb316-7" aria-hidden="true" tabindex="-1"></a>pd.Timedelta(hours <span class="op">=</span> <span class="dv">24</span>)</span>
<span id="cb316-8"><a href="dates-and-times.html#cb316-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timedelta(&#39;1 days 00:00:00&#39;)</span></span>
<span id="cb316-9"><a href="dates-and-times.html#cb316-9" aria-hidden="true" tabindex="-1"></a>pd.Timedelta(days <span class="op">=</span> <span class="dv">5</span>)</span>
<span id="cb316-10"><a href="dates-and-times.html#cb316-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timedelta(&#39;5 days 00:00:00&#39;)</span></span>
<span id="cb316-11"><a href="dates-and-times.html#cb316-11" aria-hidden="true" tabindex="-1"></a>pd.Timedelta(weeks <span class="op">=</span> <span class="dv">3</span>)</span>
<span id="cb316-12"><a href="dates-and-times.html#cb316-12" aria-hidden="true" tabindex="-1"></a><span class="co"># to create a series of Timedeltas you can use a for loop.</span></span>
<span id="cb316-13"><a href="dates-and-times.html#cb316-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timedelta(&#39;21 days 00:00:00&#39;)</span></span>
<span id="cb316-14"><a href="dates-and-times.html#cb316-14" aria-hidden="true" tabindex="-1"></a>pd.Series([pd.Timedelta(days<span class="op">=</span>i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>)])</span>
<span id="cb316-15"><a href="dates-and-times.html#cb316-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0   0 days</span></span>
<span id="cb316-16"><a href="dates-and-times.html#cb316-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   1 days</span></span>
<span id="cb316-17"><a href="dates-and-times.html#cb316-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   2 days</span></span>
<span id="cb316-18"><a href="dates-and-times.html#cb316-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   3 days</span></span>
<span id="cb316-19"><a href="dates-and-times.html#cb316-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   4 days</span></span>
<span id="cb316-20"><a href="dates-and-times.html#cb316-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: timedelta64[ns]</span></span></code></pre></div>
<div class="sourceCode" id="cb317"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb317-1"><a href="dates-and-times.html#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="op">*</span>pd.Timedelta(days <span class="op">=</span> <span class="dv">365</span>)</span>
<span id="cb317-2"><a href="dates-and-times.html#cb317-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timedelta(&#39;730 days 00:00:00&#39;)</span></span>
<span id="cb317-3"><a href="dates-and-times.html#cb317-3" aria-hidden="true" tabindex="-1"></a>pd.Timedelta(days <span class="op">=</span> <span class="dv">365</span>) <span class="op">+</span> pd.Timedelta(weeks <span class="op">=</span> <span class="dv">12</span>) <span class="op">+</span> pd.Timedelta(hours <span class="op">=</span> <span class="dv">15</span>)</span>
<span id="cb317-4"><a href="dates-and-times.html#cb317-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timedelta(&#39;449 days 15:00:00&#39;)</span></span></code></pre></div>
<p>You can add and subtract Timedeltas to and from days:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb318-1"><a href="dates-and-times.html#cb318-1" aria-hidden="true" tabindex="-1"></a>tomorrow <span class="op">=</span> pd.Timestamp.today() <span class="op">+</span> pd.Timedelta(days <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb318-2"><a href="dates-and-times.html#cb318-2" aria-hidden="true" tabindex="-1"></a>last_year <span class="op">=</span> pd.Timestamp.today() <span class="op">-</span> pd.Timedelta(days <span class="op">=</span> <span class="dv">365</span>)</span></code></pre></div>
<p>And of course, add them to dates. Timedeltas are strict durations based on the arguments. Those durations do work across the various novelties of daylight savings time and leaps in the calendar like February 29th.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb319-1"><a href="dates-and-times.html#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A leap year</span></span>
<span id="cb319-2"><a href="dates-and-times.html#cb319-2" aria-hidden="true" tabindex="-1"></a>pd.Timestamp(<span class="st">&quot;2020-02-01&quot;</span>) <span class="op">+</span> pd.Timedelta(days <span class="op">=</span> <span class="dv">30</span>)</span>
<span id="cb319-3"><a href="dates-and-times.html#cb319-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Not a leap year</span></span>
<span id="cb319-4"><a href="dates-and-times.html#cb319-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2020-03-02 00:00:00&#39;)</span></span>
<span id="cb319-5"><a href="dates-and-times.html#cb319-5" aria-hidden="true" tabindex="-1"></a>pd.Timestamp(<span class="st">&quot;2019-02-01&quot;</span>) <span class="op">+</span> pd.Timedelta(days <span class="op">=</span> <span class="dv">30</span>)</span>
<span id="cb319-6"><a href="dates-and-times.html#cb319-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Daylight Savings Time</span></span>
<span id="cb319-7"><a href="dates-and-times.html#cb319-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2019-03-03 00:00:00&#39;)</span></span>
<span id="cb319-8"><a href="dates-and-times.html#cb319-8" aria-hidden="true" tabindex="-1"></a>one_pm <span class="op">=</span> pd.Timestamp(<span class="st">&#39;2016-03-12 13:00:00&#39;</span>, tz <span class="op">=</span> <span class="st">&#39;America/New_York&#39;</span>)</span>
<span id="cb319-9"><a href="dates-and-times.html#cb319-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Day two 1pm </span></span>
<span id="cb319-10"><a href="dates-and-times.html#cb319-10" aria-hidden="true" tabindex="-1"></a>one_pm_d2 <span class="op">=</span> pd.Timestamp(<span class="st">&#39;2016-03-13 13:00:00&#39;</span>, tz <span class="op">=</span> <span class="st">&#39;America/New_York&#39;</span>)</span>
<span id="cb319-11"><a href="dates-and-times.html#cb319-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb319-12"><a href="dates-and-times.html#cb319-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb319-13"><a href="dates-and-times.html#cb319-13" aria-hidden="true" tabindex="-1"></a>one_pm <span class="op">+</span> pd.Timedelta(days <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb319-14"><a href="dates-and-times.html#cb319-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2016-03-13 14:00:00-0400&#39;, tz=&#39;America/New_York&#39;)</span></span>
<span id="cb319-15"><a href="dates-and-times.html#cb319-15" aria-hidden="true" tabindex="-1"></a>one_pm <span class="op">+</span> pd.Timedelta(hours <span class="op">=</span> <span class="dv">24</span>)</span>
<span id="cb319-16"><a href="dates-and-times.html#cb319-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb319-17"><a href="dates-and-times.html#cb319-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Notice that it correctly represents that only 23 hours had passed. </span></span>
<span id="cb319-18"><a href="dates-and-times.html#cb319-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2016-03-13 14:00:00-0400&#39;, tz=&#39;America/New_York&#39;)</span></span>
<span id="cb319-19"><a href="dates-and-times.html#cb319-19" aria-hidden="true" tabindex="-1"></a>one_pm_d2 <span class="op">-</span> one_pm</span>
<span id="cb319-20"><a href="dates-and-times.html#cb319-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timedelta(&#39;0 days 23:00:00&#39;)</span></span></code></pre></div>
<p>Let’s use Timedeltas to fix an oddity related to our flight dates. Some planes appear to have arrived at their destination <em>before</em> they departed from New York City.</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb320-1"><a href="dates-and-times.html#cb320-1" aria-hidden="true" tabindex="-1"></a>flights_dt.query(<span class="st">&#39;arr_time &lt; dep_time&#39;</span>)</span></code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dep_time</th>
      <th>sched_dep_time</th>
      <th>dep_delay</th>
      <th>arr_time</th>
      <th>sched_arr_time</th>
      <th>arr_delay</th>
      <th>origin</th>
      <th>dest</th>
      <th>air_time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>719</th>
      <td>2013-01-01 19:29:00</td>
      <td>2013-01-01 19:20:00</td>
      <td>9.0</td>
      <td>2013-01-01 00:03:00</td>
      <td>2013-01-01 00:07:00</td>
      <td>-4.0</td>
      <td>EWR</td>
      <td>BQN</td>
      <td>192.0</td>
    </tr>
    <tr>
      <th>725</th>
      <td>2013-01-01 19:39:00</td>
      <td>2013-01-01 18:40:00</td>
      <td>59.0</td>
      <td>2013-01-01 00:29:00</td>
      <td>2013-01-01 21:51:00</td>
      <td>NaN</td>
      <td>JFK</td>
      <td>DFW</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>791</th>
      <td>2013-01-01 20:58:00</td>
      <td>2013-01-01 21:00:00</td>
      <td>-2.0</td>
      <td>2013-01-01 00:08:00</td>
      <td>2013-01-01 23:59:00</td>
      <td>9.0</td>
      <td>EWR</td>
      <td>TPA</td>
      <td>159.0</td>
    </tr>
    <tr>
      <th>794</th>
      <td>2013-01-01 21:02:00</td>
      <td>2013-01-01 21:08:00</td>
      <td>-6.0</td>
      <td>2013-01-01 01:46:00</td>
      <td>2013-01-01 01:58:00</td>
      <td>-12.0</td>
      <td>EWR</td>
      <td>SJU</td>
      <td>199.0</td>
    </tr>
    <tr>
      <th>797</th>
      <td>2013-01-01 21:08:00</td>
      <td>2013-01-01 20:57:00</td>
      <td>11.0</td>
      <td>2013-01-01 00:25:00</td>
      <td>2013-01-01 00:39:00</td>
      <td>-14.0</td>
      <td>EWR</td>
      <td>SFO</td>
      <td>354.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>336753</th>
      <td>2013-09-30 21:45:00</td>
      <td>2013-09-30 21:45:00</td>
      <td>0.0</td>
      <td>2013-09-30 01:15:00</td>
      <td>2013-09-30 01:40:00</td>
      <td>-25.0</td>
      <td>JFK</td>
      <td>SJU</td>
      <td>192.0</td>
    </tr>
    <tr>
      <th>336754</th>
      <td>2013-09-30 21:47:00</td>
      <td>2013-09-30 21:37:00</td>
      <td>10.0</td>
      <td>2013-09-30 00:30:00</td>
      <td>2013-09-30 00:27:00</td>
      <td>3.0</td>
      <td>LGA</td>
      <td>FLL</td>
      <td>139.0</td>
    </tr>
    <tr>
      <th>336762</th>
      <td>2013-09-30 22:33:00</td>
      <td>2013-09-30 21:13:00</td>
      <td>80.0</td>
      <td>2013-09-30 01:12:00</td>
      <td>2013-09-30 00:30:00</td>
      <td>42.0</td>
      <td>EWR</td>
      <td>SFO</td>
      <td>318.0</td>
    </tr>
    <tr>
      <th>336763</th>
      <td>2013-09-30 22:35:00</td>
      <td>2013-09-30 20:01:00</td>
      <td>154.0</td>
      <td>2013-09-30 00:59:00</td>
      <td>2013-09-30 22:49:00</td>
      <td>130.0</td>
      <td>JFK</td>
      <td>MCO</td>
      <td>123.0</td>
    </tr>
    <tr>
      <th>336769</th>
      <td>2013-09-30 23:49:00</td>
      <td>2013-09-30 23:59:00</td>
      <td>-10.0</td>
      <td>2013-09-30 03:25:00</td>
      <td>2013-09-30 03:50:00</td>
      <td>-25.0</td>
      <td>JFK</td>
      <td>PSE</td>
      <td>196.0</td>
    </tr>
  </tbody>
</table>
<p>10633 rows × 9 columns</p>
</div>
<p>These are overnight flights. We used the same date information for both the departure and the arrival times, but these flights arrived on the following day. We can fix this by adding <code>days(1)</code> to the arrival time of each overnight flight.</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb321-1"><a href="dates-and-times.html#cb321-1" aria-hidden="true" tabindex="-1"></a>flights_dt <span class="op">=</span> flights_dt.assign(</span>
<span id="cb321-2"><a href="dates-and-times.html#cb321-2" aria-hidden="true" tabindex="-1"></a>    overnight_TF <span class="op">=</span> <span class="kw">lambda</span> x: x.arr_time <span class="op">&lt;</span> x.dep_time,</span>
<span id="cb321-3"><a href="dates-and-times.html#cb321-3" aria-hidden="true" tabindex="-1"></a>    overnight <span class="op">=</span> <span class="kw">lambda</span> x: x.overnight_TF.astype(<span class="st">&#39;int&#39;</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> y: pd.Timedelta(days <span class="op">=</span> y)),</span>
<span id="cb321-4"><a href="dates-and-times.html#cb321-4" aria-hidden="true" tabindex="-1"></a>    arr_time <span class="op">=</span> <span class="kw">lambda</span> x: x.arr_time <span class="op">+</span> x.overnight,</span>
<span id="cb321-5"><a href="dates-and-times.html#cb321-5" aria-hidden="true" tabindex="-1"></a>    sched_arr_time <span class="op">=</span> <span class="kw">lambda</span> x: x.sched_arr_time <span class="op">+</span> x.overnight</span>
<span id="cb321-6"><a href="dates-and-times.html#cb321-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Now all of our flights obey the laws of physics.</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb322-1"><a href="dates-and-times.html#cb322-1" aria-hidden="true" tabindex="-1"></a>flights_dt.query(<span class="st">&#39;arr_time &lt; dep_time&#39;</span>)</span></code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dep_time</th>
      <th>sched_dep_time</th>
      <th>dep_delay</th>
      <th>arr_time</th>
      <th>sched_arr_time</th>
      <th>arr_delay</th>
      <th>origin</th>
      <th>dest</th>
      <th>air_time</th>
      <th>overnight_TF</th>
      <th>overnight</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div>
</div>
<div id="time-zones" class="section level2" number="16.5">
<h2><span class="header-section-number">16.5</span> Time zones</h2>
<p>Time zones are an enormously complicated topic because of their interaction with geopolitical entities. Fortunately we don’t need to dig into all the details as they’re not all important for data analysis, but there are a few challenges we’ll need to tackle head on.</p>
<p>The first challenge is that everyday names of time zones tend to be ambiguous. For example, if you’re American you’re probably familiar with EST, or Eastern Standard Time. However, both Australia and Canada also have EST! To avoid confusion, The Python package <a href="https://pypi.org/project/pytz/">pytz</a> uses the international standard IANA time zones. These use a consistent naming scheme “<area>/<location>”, typically in the form “&lt;continent&gt;/&lt;city&gt;” (there are a few exceptions because not every country lies on a continent). Examples include “America/New_York”, “Europe/Paris”, and “Pacific/Auckland”. Pandas leverages the pytz package to handle time zones.</p>
<p>You might wonder why the time zone uses a city, when typically you think of time zones as associated with a country or region within a country. This is because the IANA database has to record decades worth of time zone rules. In the course of decades, countries change names (or break apart) fairly frequently, but city names tend to stay the same. Another problem is that name needs to reflect not only to the current behaviour, but also the complete history. For example, there are time zones for both “America/New_York” and “America/Detroit”. These cities both currently use Eastern Standard Time but in 1969-1972 Michigan (the state in which Detroit is located), did not follow DST, so it needs a different name. It’s worth reading the raw time zone database (available at <a href="http://www.iana.org/time-zones" class="uri">http://www.iana.org/time-zones</a>) just to read some of these stories!</p>
<p>You can find out what Python thinks your current time zone is with <code>Sys.timezone()</code>:</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb323-1"><a href="dates-and-times.html#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb323-2"><a href="dates-and-times.html#cb323-2" aria-hidden="true" tabindex="-1"></a>time.tzname</span>
<span id="cb323-3"><a href="dates-and-times.html#cb323-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (&#39;MST&#39;, &#39;MDT&#39;)</span></span></code></pre></div>
<p>To see the complete list of all time zone Olson names for a country use <code>pytz.country_timezones()</code>:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb324-1"><a href="dates-and-times.html#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytz</span>
<span id="cb324-2"><a href="dates-and-times.html#cb324-2" aria-hidden="true" tabindex="-1"></a>pytz.country_timezones(<span class="st">&#39;US&#39;</span>)</span>
<span id="cb324-3"><a href="dates-and-times.html#cb324-3" aria-hidden="true" tabindex="-1"></a><span class="co"># pytz.all_timezones()</span></span>
<span id="cb324-4"><a href="dates-and-times.html#cb324-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [&#39;America/New_York&#39;, &#39;America/Detroit&#39;, &#39;America/Kentucky/Louisville&#39;, &#39;America/Kentucky/Monticello&#39;, &#39;America/Indiana/Indianapolis&#39;, &#39;America/Indiana/Vincennes&#39;, &#39;America/Indiana/Winamac&#39;, &#39;America/Indiana/Marengo&#39;, &#39;America/Indiana/Petersburg&#39;, &#39;America/Indiana/Vevay&#39;, &#39;America/Chicago&#39;, &#39;America/Indiana/Tell_City&#39;, &#39;America/Indiana/Knox&#39;, &#39;America/Menominee&#39;, &#39;America/North_Dakota/Center&#39;, &#39;America/North_Dakota/New_Salem&#39;, &#39;America/North_Dakota/Beulah&#39;, &#39;America/Denver&#39;, &#39;America/Boise&#39;, &#39;America/Phoenix&#39;, &#39;America/Los_Angeles&#39;, &#39;America/Anchorage&#39;, &#39;America/Juneau&#39;, &#39;America/Sitka&#39;, &#39;America/Metlakatla&#39;, &#39;America/Yakutat&#39;, &#39;America/Nome&#39;, &#39;America/Adak&#39;, &#39;Pacific/Honolulu&#39;]</span></span></code></pre></div>
<p>In Python, the time zone is an attribute of the date-time that only controls printing. For example, these three objects represent the same instant in time:</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb325-1"><a href="dates-and-times.html#cb325-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="op">=</span> pd.Timestamp(<span class="st">&quot;2015-06-01 12:00:00&quot;</span>, tz <span class="op">=</span> <span class="st">&#39;America/New_York&#39;</span>)</span>
<span id="cb325-2"><a href="dates-and-times.html#cb325-2" aria-hidden="true" tabindex="-1"></a>x2 <span class="op">=</span> pd.Timestamp(<span class="st">&quot;2015-06-01 18:00:00&quot;</span>, tz <span class="op">=</span> <span class="st">&#39;Europe/Copenhagen&#39;</span>)</span>
<span id="cb325-3"><a href="dates-and-times.html#cb325-3" aria-hidden="true" tabindex="-1"></a>x3 <span class="op">=</span> pd.Timestamp(<span class="st">&quot;2015-06-01 04:00:00&quot;</span>, tz <span class="op">=</span> <span class="st">&#39;Pacific/Auckland&#39;</span>)</span></code></pre></div>
<p>You can verify that they’re the same time by converting to UTC and comparing the offsets</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb326-1"><a href="dates-and-times.html#cb326-1" aria-hidden="true" tabindex="-1"></a>x1.tz_convert(<span class="st">&#39;utc&#39;</span>)</span>
<span id="cb326-2"><a href="dates-and-times.html#cb326-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2015-06-01 16:00:00+0000&#39;, tz=&#39;UTC&#39;)</span></span>
<span id="cb326-3"><a href="dates-and-times.html#cb326-3" aria-hidden="true" tabindex="-1"></a>x2.tz_convert(<span class="st">&#39;utc&#39;</span>)</span>
<span id="cb326-4"><a href="dates-and-times.html#cb326-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2015-06-01 16:00:00+0000&#39;, tz=&#39;UTC&#39;)</span></span>
<span id="cb326-5"><a href="dates-and-times.html#cb326-5" aria-hidden="true" tabindex="-1"></a>x3.tz_convert(<span class="st">&#39;utc&#39;</span>)</span>
<span id="cb326-6"><a href="dates-and-times.html#cb326-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timestamp(&#39;2015-05-31 16:00:00+0000&#39;, tz=&#39;UTC&#39;)</span></span></code></pre></div>
<p>You can’t do subtraction with Timestamps of different time zones:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb327-1"><a href="dates-and-times.html#cb327-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="op">-</span> x2</span>
<span id="cb327-2"><a href="dates-and-times.html#cb327-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in py_call_impl(callable, dots$args, dots$keywords): TypeError: Timestamp subtraction must have the same timezones or no timezones</span></span>
<span id="cb327-3"><a href="dates-and-times.html#cb327-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb327-4"><a href="dates-and-times.html#cb327-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Detailed traceback:</span></span>
<span id="cb327-5"><a href="dates-and-times.html#cb327-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;</span></span>
<span id="cb327-6"><a href="dates-and-times.html#cb327-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   File &quot;pandas/_libs/tslibs/timestamps.pyx&quot;, line 364, in pandas._libs.tslibs.timestamps._Timestamp.__sub__</span></span>
<span id="cb327-7"><a href="dates-and-times.html#cb327-7" aria-hidden="true" tabindex="-1"></a>x1 <span class="op">-</span> x3</span>
<span id="cb327-8"><a href="dates-and-times.html#cb327-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in py_call_impl(callable, dots$args, dots$keywords): TypeError: Timestamp subtraction must have the same timezones or no timezones</span></span>
<span id="cb327-9"><a href="dates-and-times.html#cb327-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb327-10"><a href="dates-and-times.html#cb327-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Detailed traceback:</span></span>
<span id="cb327-11"><a href="dates-and-times.html#cb327-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;</span></span>
<span id="cb327-12"><a href="dates-and-times.html#cb327-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   File &quot;pandas/_libs/tslibs/timestamps.pyx&quot;, line 364, in pandas._libs.tslibs.timestamps._Timestamp.__sub__</span></span></code></pre></div>
<p>But Timedeltas can be calculated after using <code>.tz_convert()</code>:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb328-1"><a href="dates-and-times.html#cb328-1" aria-hidden="true" tabindex="-1"></a>x1.tz_convert(<span class="st">&#39;utc&#39;</span>) <span class="op">-</span> x2.tz_convert(<span class="st">&#39;utc&#39;</span>)</span>
<span id="cb328-2"><a href="dates-and-times.html#cb328-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Timedelta(&#39;0 days 00:00:00&#39;)</span></span></code></pre></div>
<p>Unless otherwise specified, <code>pd.Timestampe()</code> is not timezone aware. UTC (Coordinated Universal Time) is the standard time zone used by the scientific community and roughly equivalent to its predecessor GMT (Greenwich Mean Time). It does not have DST, which makes a convenient representation for computation. Operations that combine date-times into a Series will often convert the time zone to UTC and then return the Series as an object or character string.</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb329-1"><a href="dates-and-times.html#cb329-1" aria-hidden="true" tabindex="-1"></a>x4 <span class="op">=</span> pd.Series([x1, x2, x3])</span>
<span id="cb329-2"><a href="dates-and-times.html#cb329-2" aria-hidden="true" tabindex="-1"></a>x4</span>
<span id="cb329-3"><a href="dates-and-times.html#cb329-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0    2015-06-01 12:00:00-04:00</span></span>
<span id="cb329-4"><a href="dates-and-times.html#cb329-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    2015-06-01 18:00:00+02:00</span></span>
<span id="cb329-5"><a href="dates-and-times.html#cb329-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    2015-06-01 04:00:00+12:00</span></span>
<span id="cb329-6"><a href="dates-and-times.html#cb329-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: object</span></span></code></pre></div>
<p>Combining elements that all have the same time zone will return a datetime object with that specified time zone:</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb330-1"><a href="dates-and-times.html#cb330-1" aria-hidden="true" tabindex="-1"></a>x5 <span class="op">=</span> pd.Series([x1.tz_convert(<span class="st">&#39;utc&#39;</span>), x2.tz_convert(<span class="st">&#39;utc&#39;</span>), x3.tz_convert(<span class="st">&#39;utc&#39;</span>)])</span>
<span id="cb330-2"><a href="dates-and-times.html#cb330-2" aria-hidden="true" tabindex="-1"></a>x5</span>
<span id="cb330-3"><a href="dates-and-times.html#cb330-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0   2015-06-01 16:00:00+00:00</span></span>
<span id="cb330-4"><a href="dates-and-times.html#cb330-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   2015-06-01 16:00:00+00:00</span></span>
<span id="cb330-5"><a href="dates-and-times.html#cb330-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   2015-05-31 16:00:00+00:00</span></span>
<span id="cb330-6"><a href="dates-and-times.html#cb330-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: datetime64[ns, UTC]</span></span></code></pre></div>
<p>Finally, Timestamp objects that don’t have a specified time zone will state ase datetime objects:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb331-1"><a href="dates-and-times.html#cb331-1" aria-hidden="true" tabindex="-1"></a>pd.Series([pd.Timestamp(<span class="st">&quot;2015-06-01 04:00:00&quot;</span>), pd.Timestamp(<span class="st">&quot;2015-06-01 04:00:00&quot;</span>)])</span>
<span id="cb331-2"><a href="dates-and-times.html#cb331-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0   2015-06-01 04:00:00</span></span>
<span id="cb331-3"><a href="dates-and-times.html#cb331-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   2015-06-01 04:00:00</span></span>
<span id="cb331-4"><a href="dates-and-times.html#cb331-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: datetime64[ns]</span></span></code></pre></div>
<p>You can change the time zone in two ways:</p>
<ul>
<li><p>Keep the instant in time the same, and change how it’s displayed.
Use this when the instant is correct, but you want a more natural
display.</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb332-1"><a href="dates-and-times.html#cb332-1" aria-hidden="true" tabindex="-1"></a>x5a <span class="op">=</span> x5.dt.tz_convert(<span class="st">&#39;Australia/Lord_Howe&#39;</span>)</span>
<span id="cb332-2"><a href="dates-and-times.html#cb332-2" aria-hidden="true" tabindex="-1"></a>x5a</span>
<span id="cb332-3"><a href="dates-and-times.html#cb332-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0   2015-06-02 02:30:00+10:30</span></span>
<span id="cb332-4"><a href="dates-and-times.html#cb332-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   2015-06-02 02:30:00+10:30</span></span>
<span id="cb332-5"><a href="dates-and-times.html#cb332-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   2015-06-01 02:30:00+10:30</span></span>
<span id="cb332-6"><a href="dates-and-times.html#cb332-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: datetime64[ns, Australia/Lord_Howe]</span></span></code></pre></div>
<p>(This also illustrates another challenge of times zones: they’re not
all integer hour offsets!)</p></li>
<li><p>Change the underlying instant in time. Use <code>None</code> to strip the time zone
when you have an instant that has been labelled with the incorrect time
zone, and you need to fix it.</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb333-1"><a href="dates-and-times.html#cb333-1" aria-hidden="true" tabindex="-1"></a>x5b <span class="op">=</span> x5.dt.tz_localize(<span class="va">None</span>).dt.tz_localize(<span class="st">&#39;Australia/Lord_Howe&#39;</span>)</span>
<span id="cb333-2"><a href="dates-and-times.html#cb333-2" aria-hidden="true" tabindex="-1"></a>x5b</span>
<span id="cb333-3"><a href="dates-and-times.html#cb333-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0   2015-06-01 16:00:00+10:30</span></span>
<span id="cb333-4"><a href="dates-and-times.html#cb333-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   2015-06-01 16:00:00+10:30</span></span>
<span id="cb333-5"><a href="dates-and-times.html#cb333-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   2015-05-31 16:00:00+10:30</span></span>
<span id="cb333-6"><a href="dates-and-times.html#cb333-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dtype: datetime64[ns, Australia/Lord_Howe]</span></span></code></pre></div></li>
</ul>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="factors.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="program-intro.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/byuidatascience/python4ds/edit/master/datetimes.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
